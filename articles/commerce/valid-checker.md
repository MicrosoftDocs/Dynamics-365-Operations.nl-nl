---
title: Consistentiecontrole voor detailhandeltransacties
description: In dit onderwerp wordt de functie voor de consistentiecontrole voor transacties in Dynamics 365 Commerce beschreven.
author: josaw1
manager: AnnBe
ms.date: 10/07/2020
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: cce0d408ac6d372fb726eff8fa4b0358ec200243
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/15/2021
ms.locfileid: "5210990"
---
# <a name="retail-transaction-consistency-checker"></a><span data-ttu-id="ba67f-103">Consistentiecontrole voor detailhandeltransacties</span><span class="sxs-lookup"><span data-stu-id="ba67f-103">Retail transaction consistency checker</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="ba67f-104">In dit onderwerp wordt de functie voor de consistentiecontrole voor transacties in Microsoft Dynamics 365 Commerce beschreven.</span><span class="sxs-lookup"><span data-stu-id="ba67f-104">This topic describes the transaction consistency checker functionality in Microsoft Dynamics 365 Commerce.</span></span> <span data-ttu-id="ba67f-105">In de consistentiecontrole worden inconsistente transacties geïdentificeerd en geïsoleerd voordat ze worden verzameld door het boekingsproces voor overzichten.</span><span class="sxs-lookup"><span data-stu-id="ba67f-105">The consistency checker identifies and isolates inconsistent transactions before they are picked up by the statement posting process.</span></span>

<span data-ttu-id="ba67f-106">Wanneer een overzicht wordt geboekt, kan de boeking mislukken vanwege inconsistente gegevens in de tabellen met handeltransacties.</span><span class="sxs-lookup"><span data-stu-id="ba67f-106">When a statement is posted, posting can fail due to inconsistent data in the commerce transaction tables.</span></span> <span data-ttu-id="ba67f-107">Het gegevensprobleem kan worden veroorzaakt door onvoorziene problemen in de POS-toepassing (Point of Sale, POS) of door incorrect geïmporteerde transacties uit POS-systemen van derden.</span><span class="sxs-lookup"><span data-stu-id="ba67f-107">The data issue may be caused by unforeseen issues in the point of sale (POS) application, or if transactions were incorrectly imported from third-party POS systems.</span></span> <span data-ttu-id="ba67f-108">Enkele voorbeelden van hoe deze inconsistenties kunnen worden weergegeven:</span><span class="sxs-lookup"><span data-stu-id="ba67f-108">Examples of how these inconsistencies may appear include:</span></span> 

- <span data-ttu-id="ba67f-109">Het transactietotaal in de kopteksttabel komt niet overeen met het transactietotaal op de regels.</span><span class="sxs-lookup"><span data-stu-id="ba67f-109">The transaction total on the header table does not match the transaction total on the lines.</span></span>
- <span data-ttu-id="ba67f-110">Het aantal regels in de kopteksttabel komt niet overeen met het aantal regels in de transactietabel.</span><span class="sxs-lookup"><span data-stu-id="ba67f-110">The line count on the header table does not match with the number of lines in the transaction table.</span></span>
- <span data-ttu-id="ba67f-111">De btw in de kopteksttabel komen niet overeen met het btw-bedrag op de regels.</span><span class="sxs-lookup"><span data-stu-id="ba67f-111">Taxes on the header table do not match the tax amount on the lines.</span></span> 

<span data-ttu-id="ba67f-112">Wanneer er inconsistente transacties worden verzameld door het boekingsproces voor overzichten, worden er inconsistente verkoopfacturen en betalingsjournalen gemaakt en mislukt het gehele boekingsproces voor overzichten.</span><span class="sxs-lookup"><span data-stu-id="ba67f-112">When inconsistent transactions are picked up by the statement posting process, inconsistent sales invoices and payment journals are created, and the entire statement posting process fails as a result.</span></span> <span data-ttu-id="ba67f-113">Dergelijke overzichten kunnen alleen nog worden hersteld door middel van gecompliceerde gegevenscorrecties via meerdere transactietabellen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-113">Recovering the statements from such a state involves complex data fixes across multiple transaction tables.</span></span> <span data-ttu-id="ba67f-114">Met de consistentiecontrole voor transacties kunnen dit soort problemen worden voorkomen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-114">The transaction consistency checker prevents such issues.</span></span>

<span data-ttu-id="ba67f-115">Het volgende diagram biedt inzicht in het boekingsproces met de consistentiecontrole voor detailhandeltransacties.</span><span class="sxs-lookup"><span data-stu-id="ba67f-115">The following chart illustrates the posting process with the transaction consistency checker.</span></span>

<span data-ttu-id="ba67f-116">![Boekingsproces voor overzichten met consistentiecontrole voor transacties](./media/validchecker.png "Boekingsproces voor overzichten met consistentiecontrole voor transacties")</span><span class="sxs-lookup"><span data-stu-id="ba67f-116">![Statement posting process with transaction consistency checker](./media/validchecker.png "Statement posting process with retail transaction consistency checker")</span></span>

<span data-ttu-id="ba67f-117">Met het batchproces **Winkeltransacties valideren** wordt de consistentie van de tabellen met handeltransacties gecontroleerd voor de volgende scenario's.</span><span class="sxs-lookup"><span data-stu-id="ba67f-117">The **Validate store transactions** batch process checks the consistency of the commerce transaction tables for the following scenarios.</span></span>

- <span data-ttu-id="ba67f-118">**Klantrekening**: hiermee wordt gecontroleerd of de klantrekening in de tabellen met handeltransacties bestaat in het HQ-klantmodel.</span><span class="sxs-lookup"><span data-stu-id="ba67f-118">**Customer account** – Validates that the customer account in the transaction tables exists in the HQ customer master.</span></span>
- <span data-ttu-id="ba67f-119">**Regeltelling**: hiermee wordt gecontroleerd of het aantal regels, zoals vastgelegd in de transactiekopteksttabel, overeenkomt met het aantal regels in de verkooptransactietabellen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-119">**Line count** – Validates that the number of lines, as captured on the transaction header table, matches the number of lines in the sales transaction tables.</span></span>
- <span data-ttu-id="ba67f-120">**Prijs inclusief belasting**: hiermee wordt gecontroleerd of de parameter **Prijs inclusief belasting** consistent is op de verschillende transactieregels en of de prijs op de verkoopregel in overeenstemming is met de prijs inclusief belasting en de configuratie voor belastingvrijstelling.</span><span class="sxs-lookup"><span data-stu-id="ba67f-120">**Price includes tax** – Validates that the **Price includes tax** parameter is consistent across transaction lines and the price on the sales line is in accordance with price includes tax and tax exempt configuration.</span></span>
- <span data-ttu-id="ba67f-121">**Betalingsbedrag**: hiermee wordt gecontroleerd of de betalingsrecords overeenkomen met het betalingsbedrag in de kop, waarbij ook rekening wordt gehouden met de configuratie voor afronding in het grootboek.</span><span class="sxs-lookup"><span data-stu-id="ba67f-121">**Payment amount** - Validates that the payment records match the payment amount on the header, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="ba67f-122">**Brutobedrag**: hiermee wordt gecontroleerd of het brutobedrag in de kop de som is van de nettobedragen op de regels plus het belastingbedrag, waarbij ook rekening wordt gehouden met de configuratie voor afronding in het grootboek.</span><span class="sxs-lookup"><span data-stu-id="ba67f-122">**Gross amount** – Validates that the gross amount on the header is the sum of the net amounts on the lines plus the tax amount, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="ba67f-123">**Nettobedrag**: hiermee wordt gecontroleerd of het nettobedrag in de kop de som is van de nettobedragen op de regels, waarbij ook rekening wordt gehouden met de configuratie voor afronding in het grootboek.</span><span class="sxs-lookup"><span data-stu-id="ba67f-123">**Net amount** – Validates that the net amount on the header is the sum of the net amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="ba67f-124">**Over-/onderbetaling**: hiermee wordt gecontroleerd of het verschil tussen het brutobedrag in de kop en het betalingsbedrag niet hoger is dan de maximumwaarde van de configuratie voor over-/onderbetaling, waarbij ook rekening wordt gehouden met de configuratie voor afronding in het grootboek.</span><span class="sxs-lookup"><span data-stu-id="ba67f-124">**Under / Over payment** – Validates that the difference between the gross amount on the header and the payment amount doesn't exceed the maximum underpayment/overpayment configuration, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="ba67f-125">**Kortingsbedrag**: hiermee wordt gecontroleerd of het kortingsbedrag in de kortingstabellen en het kortingsbedrag in de tabellen met transactieregels consistent zijn en of het kortingsbedrag in de kop het totaal is van de kortingsbedragen op de regels, waarbij ook rekening wordt gehouden met de configuratie voor afronding in het grootboek.</span><span class="sxs-lookup"><span data-stu-id="ba67f-125">**Discount amount** – Validates that the discount amount on the discount tables and the discount amount on the transaction line tables are consistent, and that the discount amount on the header is the sum of the discount amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="ba67f-126">**Regelkorting**: hiermee wordt gecontroleerd of de regelkorting op de transactieregel het totaal is van alle regels in de kortingstabel die overeenkomt met de transactieregel.</span><span class="sxs-lookup"><span data-stu-id="ba67f-126">**Line discount** – Validates that the line discount on the transaction line is the sum of all the lines in the discount table that corresponds to the transaction line.</span></span>
- <span data-ttu-id="ba67f-127">**Geschenkbonartikel**: Commerce ondersteunt niet het retourneren van geschenkbonartikelen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-127">**Gift card item** – Commerce doesn't support the return of gift card items.</span></span> <span data-ttu-id="ba67f-128">Het saldo op een geschenkbon kan echter wel contant worden uitbetaald. Geschenkbonartikelen die worden verwerkt als een retourregel in plaats van een uitbetalingsregel mislukken voor het boekingsproces voor overzichten.</span><span class="sxs-lookup"><span data-stu-id="ba67f-128">However, the balance on a gift card can be cashed out. Any gift card item that is processed as a return line instead of a cash-out line fails the statement posting process.</span></span> <span data-ttu-id="ba67f-129">Het validatieproces voor geschenkbonartikelen zorgt dat de enige retourregels voor geschenkbonartikelen in de transactietabellen uitbetalingsregels voor de geschenkbon zijn.</span><span class="sxs-lookup"><span data-stu-id="ba67f-129">The validation process for gift card items helps guarantee that the only return gift card line items on the transaction tables are gift card cash-out lines.</span></span>
- <span data-ttu-id="ba67f-130">**Negatieve prijs**: hiermee wordt gevalideerd of er geen transactieregels met een negatieve prijs zijn.</span><span class="sxs-lookup"><span data-stu-id="ba67f-130">**Negative price** – Validates that there are no negative price transaction lines.</span></span>
- <span data-ttu-id="ba67f-131">**Artikel en variant**: hiermee wordt gevalideerd of artikelen en varianten op de transactieregels bestaan in het stambestand met artikelen en varianten.</span><span class="sxs-lookup"><span data-stu-id="ba67f-131">**Item & Variant** – Validates that items and variants on the transaction lines exist in the item and variant master file.</span></span>
- <span data-ttu-id="ba67f-132">**Belastingbedrag**: hiermee wordt gecontroleerd of belastingrecords overeenkomen met de belastingbedragen op de regels.</span><span class="sxs-lookup"><span data-stu-id="ba67f-132">**Tax amount** - Validates that tax records match the tax amounts on the lines.</span></span>
- <span data-ttu-id="ba67f-133">**Serienummer**: hiermee wordt gevalideerd of het serienummer aanwezig is in de transactieregels voor artikelen die worden gecontroleerd op serienummer.</span><span class="sxs-lookup"><span data-stu-id="ba67f-133">**Serial number** - Validates that the serial number is present in the transaction lines for items that are controlled by serial number.</span></span>
- <span data-ttu-id="ba67f-134">**Ondertekenen**: hiermee wordt gevalideerd of het teken op de hoeveelheid en het nettobedrag hetzelfde zijn in alle transactieregels.</span><span class="sxs-lookup"><span data-stu-id="ba67f-134">**Sign** - Validates that the sign on the quantity and the net amount are the same in all the transaction lines.</span></span>
- <span data-ttu-id="ba67f-135">**Zakelijke datum**: hiermee wordt gecontroleerd of de financiële perioden voor alle zakelijke datums voor de transacties openstaan.</span><span class="sxs-lookup"><span data-stu-id="ba67f-135">**Business date** - Validates that the financial periods for all the business dates for the transactions are open.</span></span>
- <span data-ttu-id="ba67f-136">**Toeslagen**: hiermee wordt gecontroleerd of het bedrag van de toeslag in de kop en op de regels in overeenstemming is met de prijs, inclusief belasting en de configuratie voor belastingvrijstelling.</span><span class="sxs-lookup"><span data-stu-id="ba67f-136">**Charges** - Validates that the header and line charge amount is in accordance with price, including tax and tax exempt configuration.</span></span>

## <a name="set-up-the-consistency-checker"></a><span data-ttu-id="ba67f-137">De consistentiecontrole instellen</span><span class="sxs-lookup"><span data-stu-id="ba67f-137">Set up the consistency checker</span></span>

<span data-ttu-id="ba67f-138">Configureer het batchproces 'Winkeltransacties valideren' via **Retail en Commerce \> IT Retail en Commerce \> POS-boekingen** voor periodieke uitvoering.</span><span class="sxs-lookup"><span data-stu-id="ba67f-138">Configure the "Validate store transactions" batch process, at **Retail and Commerce \> Retail and Commerce IT \> POS posting**, for periodic runs.</span></span> <span data-ttu-id="ba67f-139">De batchtaak kan worden gepland op basis van de organisatiehiërarchie van de winkel, op dezelfde wijze als de processen Overzichten in batch berekenen en Overzichten in batch boeken zijn ingesteld.</span><span class="sxs-lookup"><span data-stu-id="ba67f-139">The batch job can be scheduled based on store organization hierarchy, similar to how the "Calculate statement in batch" and "Post statement in batch" processes are set up.</span></span> <span data-ttu-id="ba67f-140">We raden u aan dit batchproces zo te configureren dat het meerdere keren per dag wordt uitgevoerd en zo te plannen dat het na elke P-taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba67f-140">We recommend that you configure this batch process to run multiple times in a day and schedule it so that it runs at the end of every P-job execution.</span></span>

## <a name="results-of-validation-process"></a><span data-ttu-id="ba67f-141">Resultaten van validatieproces</span><span class="sxs-lookup"><span data-stu-id="ba67f-141">Results of validation process</span></span>

<span data-ttu-id="ba67f-142">De resultaten van de validatie door het batchproces worden toegevoegd aan de betreffende transactie.</span><span class="sxs-lookup"><span data-stu-id="ba67f-142">The results of the validation check by the batch process are tagged on the appropriate transaction.</span></span> <span data-ttu-id="ba67f-143">Het veld **Validatiestatus** in de record van de transactie wordt ingesteld op **Geslaagd** of **Fout** en de datum van de laatste validatie wordt weergegeven in het veld **Laatste validatietijd**.</span><span class="sxs-lookup"><span data-stu-id="ba67f-143">The **Validation status** field on the transaction record is either set to **Successful** or **Error**, and the date of the last validation run appears on the **Last validation time** field.</span></span>

<span data-ttu-id="ba67f-144">Als u meer beschrijvende fouttekst voor een validatiefout wilt weergeven, selecteert u de betreffende transactierecord voor de winkel en klikt u op de knop **Validatiefouten**.</span><span class="sxs-lookup"><span data-stu-id="ba67f-144">To view more descriptive error text relating to a validation failure, select the relevant store transaction record and click the **Validation errors** button.</span></span>

<span data-ttu-id="ba67f-145">Transacties die de validatie niet doorstaan en transacties die nog niet zijn gevalideerd, worden niet in overzichten opgenomen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-145">Transactions that fail the validation check and transactions that have not yet been validated will not be pulled into statements.</span></span> <span data-ttu-id="ba67f-146">Tijdens het proces Overzicht berekenen wordt voor gebruikers een melding weergegeven als er transacties zijn die door een validatiefout niet in het overzicht zijn opgenomen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-146">During the "Calculate statement" process, users will be notified if there are transactions that could have been included in the statement but weren't.</span></span>

<span data-ttu-id="ba67f-147">Als een validatiefout wordt gevonden, kunt u de fout alleen herstelen door contact op te nemen met Microsoft Support.</span><span class="sxs-lookup"><span data-stu-id="ba67f-147">If a validation error is found, the only way to fix the error is to contact Microsoft Support.</span></span> <span data-ttu-id="ba67f-148">In een toekomstige versie wordt het voor gebruikers mogelijk om de betreffende records te herstellen via de gebruikersinterface.</span><span class="sxs-lookup"><span data-stu-id="ba67f-148">In a future release, capability will be added so that users can fix the records that failed through the user interface.</span></span> <span data-ttu-id="ba67f-149">Daarnaast worden functies voor logboekregistratie en controle toegevoegd, zodat de geschiedenis van de wijzigingen kan worden bijgehouden.</span><span class="sxs-lookup"><span data-stu-id="ba67f-149">Logging and auditing capabilities will also be made available to trace the history of the modifications.</span></span>

> [!NOTE]
> <span data-ttu-id="ba67f-150">In een toekomstige versie worden extra validatieregels toegevoegd om meer scenario's te ondersteunen.</span><span class="sxs-lookup"><span data-stu-id="ba67f-150">Additional validation rules to support more scenarios will be added in a future release.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
---
title: Overzicht van betalingen voor meerdere kanalen
description: Dit onderwerp biedt een overzicht van betalingen voor meerdere kanalen in Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/13/2020
ms.locfileid: "4411498"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="8fc31-103">Overzicht van betalingen voor meerdere kanalen</span><span class="sxs-lookup"><span data-stu-id="8fc31-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="8fc31-104">Dit onderwerp biedt een overzicht van betalingen voor meerdere kanalen in Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="8fc31-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="8fc31-105">Het bevat een uitgebreide lijst met ondersteunde scenario's, informatie over functionaliteit, installatie en probleemoplossing, en beschrijvingen van enkele veelvoorkomende problemen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="8fc31-106">Belangrijke termen</span><span class="sxs-lookup"><span data-stu-id="8fc31-106">Key terms</span></span>

| <span data-ttu-id="8fc31-107">Voorwaarde</span><span class="sxs-lookup"><span data-stu-id="8fc31-107">Term</span></span> | <span data-ttu-id="8fc31-108">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="8fc31-108">Description</span></span> |
|---|---|
| <span data-ttu-id="8fc31-109">Token </span><span class="sxs-lookup"><span data-stu-id="8fc31-109">Token</span></span> | <span data-ttu-id="8fc31-110">Een reeks gegevens die door een betalingsverwerker als verwijzing worden verstrekt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="8fc31-111">Tokens kunnen voor creditcardnummers, betalingsautorisaties en vastleggingen van eerdere betalingen staan.</span><span class="sxs-lookup"><span data-stu-id="8fc31-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="8fc31-112">Tokens zijn belangrijk omdat hiermee gevoelige gegevens uit het POS-systeem (Point of Sale) kunnen worden gehouden.</span><span class="sxs-lookup"><span data-stu-id="8fc31-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="8fc31-113">Dit worden ook wel *verwijzingen* genoemd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="8fc31-114">Kaarttoken</span><span class="sxs-lookup"><span data-stu-id="8fc31-114">Card token</span></span> | <span data-ttu-id="8fc31-115">Een token dat door een betalingsverwerker beschikbaar wordt gesteld voor opslag in het POS-systeem.</span><span class="sxs-lookup"><span data-stu-id="8fc31-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="8fc31-116">Een kaarttoken kan alleen worden gebruikt door de verkoper die het token ontvangt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="8fc31-117">Kaarttokens worden ook wel *kaartverwijzingen* genoemd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="8fc31-118">Autorisatietoken</span><span class="sxs-lookup"><span data-stu-id="8fc31-118">Authorization (auth) token</span></span> | <span data-ttu-id="8fc31-119">Een unieke id die door een betalingsproces wordt gebruikt als onderdeel van het antwoord dat naar een POS-systeem wordt verzonden nadat het POS-systeem een autorisatieaanvraag heeft ingediend.</span><span class="sxs-lookup"><span data-stu-id="8fc31-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="8fc31-120">Een autorisatietoken kan later worden gebruikt als de verwerker wordt aangeroepen om acties uit te voeren, zoals het terugdraaien of ongeldig maken van de autorisatie.</span><span class="sxs-lookup"><span data-stu-id="8fc31-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="8fc31-121">Het wordt echter meestal gebruikt om fondsen vast te leggen wanneer aan een wordt voldaan of een transactie wordt afgerond.</span><span class="sxs-lookup"><span data-stu-id="8fc31-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="8fc31-122">Autorisatietokens worden ook wel *autorisatieverwijzingen* genoemd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="8fc31-123">Vastleggingstoken</span><span class="sxs-lookup"><span data-stu-id="8fc31-123">Capture token</span></span> | <span data-ttu-id="8fc31-124">Een verwijzing die door een betalingsverwerker aan een POS-systeem wordt doorgegeven wanneer een betaling wordt afgerond of vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="8fc31-125">De vastleggingstoken kan vervolgens bij latere bewerkingen, zoals restitutieaanvragen, worden gebruikt om te verwijzen naar de betalingsregistratie.</span><span class="sxs-lookup"><span data-stu-id="8fc31-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="8fc31-126">Kaart niet aanwezig</span><span class="sxs-lookup"><span data-stu-id="8fc31-126">Card not present</span></span> | <span data-ttu-id="8fc31-127">Een term die verwijst naar betalingstransacties waarbij geen fysieke kaart wordt aangeboden.</span><span class="sxs-lookup"><span data-stu-id="8fc31-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="8fc31-128">Deze transacties kunnen bijvoorbeeld plaatsvinden in e-commerce- of callcenterscenario's.</span><span class="sxs-lookup"><span data-stu-id="8fc31-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="8fc31-129">Voor deze transacties worden de betalingsgegevens handmatig ingevoerd op een e-commercewebsite, in een callcenterproces of op de POS- of de betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="8fc31-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="8fc31-130">Kaart aanwezig</span><span class="sxs-lookup"><span data-stu-id="8fc31-130">Card present</span></span> | <span data-ttu-id="8fc31-131">Een term die verwijst naar betalingstransacties waarbij een fysieke kaart wordt gepresenteerd en gebruikt op een betalingsterminal die is verbonden met het Microsoft Dynamics 365 POS-systeem.</span><span class="sxs-lookup"><span data-stu-id="8fc31-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="8fc31-132">Overzicht</span><span class="sxs-lookup"><span data-stu-id="8fc31-132">Overview</span></span>

<span data-ttu-id="8fc31-133">Over het algemeen verwijst *betalingen voor meerdere kanalen* naar de mogelijkheid om een order in één kanaal te maken en in een ander kanaal te vervullen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="8fc31-134">De sleutel tot de ondersteuning van betalingen voor meerdere kanalen is het bewaren van betalingsgegevens met de rest van de orderdetails om deze betalingsgegevens vervolgens te kunnen gebruiken wanneer de order wordt ingetrokken of verwerkt in een ander kanaal.</span><span class="sxs-lookup"><span data-stu-id="8fc31-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="8fc31-135">Een klassiek voorbeeld is het scenario van online kopen en ophalen in de winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="8fc31-136">In dit scenario worden de betalingsgegevens toegevoegd wanneer de order online wordt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="8fc31-137">Deze worden vervolgens weer ingetrokken in het POS om het bedrag in rekening te brengen van de betalingskaart van de klant bij het ophalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="8fc31-138">Alle scenario's die in dit onderwerp worden beschreven, kunnen worden geïmplementeerd met de standaard-SDK Betalingen die met Commerce wordt geleverd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="8fc31-139">De [Dynamics 365-betalingsconnector voor Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) biedt een standaardimplementatie van elk scenario dat hier wordt beschreven.</span><span class="sxs-lookup"><span data-stu-id="8fc31-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="8fc31-140">Vereisten</span><span class="sxs-lookup"><span data-stu-id="8fc31-140">Prerequisites</span></span>

<span data-ttu-id="8fc31-141">Voor elk scenario dat in dit onderwerp wordt beschreven, hebt u een betalingsconnector die betalingen voor meerdere kanalen ondersteunt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="8fc31-142">De kant-en-klare Adyen-connector kan ook worden gebruikt omdat deze de scenario's ondersteunt die beschikbaar worden gesteld via de SDK Betalingen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="8fc31-143">Voor meer informatie over het implementeren van betalingsconnectors en over de Retail SDK in het algemeen gaat u naar de startpagina [Retail voor IT-professionals en ontwikkelaars](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="8fc31-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="8fc31-144">Ondersteunde versies</span><span class="sxs-lookup"><span data-stu-id="8fc31-144">Supported versions</span></span>

<span data-ttu-id="8fc31-145">De mogelijkheden voor betalingen voor meerdere kanalen die in dit onderwerp worden beschreven, zijn uitgebracht als onderdeel van Microsoft Dynamics 365 for Retail 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="8fc31-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="8fc31-146">Connectors voor transacties met of zonder kaart</span><span class="sxs-lookup"><span data-stu-id="8fc31-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="8fc31-147">De Betalingen-SDK vertrouwt op twee sets API's (Application Programming Interface) voor betalingen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="8fc31-148">De eerste set API's heeft de naam **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="8fc31-149">Deze wordt gebruikt voor de implementatie van connectors voor betalingen zonder kaart die kunnen worden gebruikt in callcenters en het platform Microsoft Dynamics e-Commerce.</span><span class="sxs-lookup"><span data-stu-id="8fc31-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="8fc31-150">Zie voor meer informatie over de interface **iPaymentProcessor** de whitepaper [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) over betalingen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="8fc31-151">De tweede set API's heeft de naam **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="8fc31-152">Deze set ondersteunt de implementatie van integraties van betalingen met kaart waarbij een betalingsterminal wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="8fc31-153">Zie voor meer informatie over de interface **iNamedRequestHandler** het onderwerp [Betalingsintegratie maken voor een betalingsterminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="8fc31-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="8fc31-154">Instellingen en configuratie</span><span class="sxs-lookup"><span data-stu-id="8fc31-154">Setup and configuration</span></span>

<span data-ttu-id="8fc31-155">De volgende onderdelen en installatiestappen zijn vereist:</span><span class="sxs-lookup"><span data-stu-id="8fc31-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="8fc31-156">**eCommerce-integratie:** een integratie met Commerce is vereist ter ondersteuning van scenario's waarin een order afkomstig is uit een online winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="8fc31-157">Zie [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk) voor meer informatie over de SDK Retail e-Commerce.</span><span class="sxs-lookup"><span data-stu-id="8fc31-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="8fc31-158">In een demo-omgeving ondersteunt de referentiewinkel scenario's voor betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="8fc31-159">**Configuratie van online betalingen**: de instellingen van het online kanaal moeten een betalingsconnector bevatten die is bijgewerkt ter ondersteuning van betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="8fc31-160">U kunt ook de kant-en-klare betalingsconnector gebruiken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="8fc31-161">Zie [Adyen-betalingsconnector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce) voor informatie over het configureren van de Adyen-betalingsconnector voor online winkels.</span><span class="sxs-lookup"><span data-stu-id="8fc31-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="8fc31-162">Naast de installatiestappen voor e-commerce die in dat onderwerp worden beschreven, moet de parameter **Opslaan van betalingsgegevens toestaan in e-commerce** zijn ingesteld op **Waar** in de instellingen voor de Adyen-connector.</span><span class="sxs-lookup"><span data-stu-id="8fc31-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="8fc31-163">**Configuratie van betalingen voor meerdere kanalen**: ga in de back-office naar **Retail en Commerce \> Instelling van hoofdkantoor \> Parameters \> Gedeelde Commerce-parameters**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="8fc31-164">Stel vervolgens op het tabblad **Betalingen voor meerdere kanalen** de optie **Betalingen voor meerdere kanalen gebruiken** in op **Ja**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="8fc31-165">In Commerce versies 10.0.12 en hoger bevindt deze instelling zich in het werkgebied **Functiebeheer**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="8fc31-166">Selecteer de functie **Betalingen voor meerdere kanalen** en klik op **Nu inschakelen**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="8fc31-167">**Betalingsservices:** het callcenter gebruikt de standaardbetalingsconnector op de pagina **Betalingsservices** om betalingen te verwerken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="8fc31-168">Ter ondersteuning van scenario's, zoals 'kopen in callcenter, ophalen in winkel' wilt ondersteunen, moet deze standaardbetalingsconnector de Adyen-betalingsconnector of een betalingsconnector zijn die voldoet aan de implementatievereisten voor betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="8fc31-169">**EFT-service** : betalingen via een betalingsterminal moeten worden ingesteld op het sneltabblad **EFT-service** van het hardwareprofiel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="8fc31-170">De Adyen-connector ondersteunt kant-en-klare betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="8fc31-171">Andere betalingsconnectors die de interface **iNamedRequestHandler** ondersteunen, kunnen ook worden gebruikt als ze betalingen voor meerdere kanalen ondersteunen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="8fc31-172">**Beschikbaarheid van betalingsconnector:** wanneer een order wordt ingetrokken, bevatten de regels van de betalingsmethode die met de order worden ingetrokken de naam van de betalingsconnector die is gebruikt voor het maken van de autorisaties die aan die order zijn gekoppeld.</span><span class="sxs-lookup"><span data-stu-id="8fc31-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="8fc31-173">Wanneer de order wordt voltooid, probeert de SDK Betalingen dezelfde connector te gebruiken die is gebruikt om de oorspronkelijke autorisatie te maken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="8fc31-174">Daarom moet een betalingsconnector met dezelfde zakelijke eigenschappen beschikbaar zijn voor registratie.</span><span class="sxs-lookup"><span data-stu-id="8fc31-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="8fc31-175">**Kaarttypen:** scenario's met betalingen voor meerdere kanalen werken alleen naar behoren als voor elk kanaal dezelfde typen betalingsmethoden zijn ingesteld die voor meerdere kanalen kunnen worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="8fc31-176">Hierbij gaat het onder andere om betalingsmethode-id' en kaarttype-id's.</span><span class="sxs-lookup"><span data-stu-id="8fc31-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="8fc31-177">Als het type betalingsmethode **Kaarten** bijvoorbeeld de id **2** heeft in de instelling van de online winkel, moet deze dezelfde id hebben in de instelling van de detailhandelwinkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="8fc31-178">Dezelfde vereiste geldt voor kaarttype-id's.</span><span class="sxs-lookup"><span data-stu-id="8fc31-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="8fc31-179">Als kaartnummer **12** is ingesteld op **VISA** in de online winkel, moet dezelfde id worden ingesteld voor de detailhandelwinkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="8fc31-180">Het Retail Modern POS voor Windows of Android met ingebouwd hardwarestation   -of-</span><span class="sxs-lookup"><span data-stu-id="8fc31-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="8fc31-181">Modern POS voor iOS of cloud-POS met verbonden, gedeeld hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="8fc31-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="8fc31-182">Basisprincipe voor het ondersteunen van betalingen voor meerdere kanalen</span><span class="sxs-lookup"><span data-stu-id="8fc31-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="8fc31-183">Betalingsconnectors en betalingsprocessors gebruiken tokens of verwijzingen om te verwijzen naar interacties die betrekking hebben op kaartbetalingen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="8fc31-184">Wanneer bijvoorbeeld een betalingsautorisatie wordt aangevraagd, wordt een verwijzing naar die autorisatie gegeven.</span><span class="sxs-lookup"><span data-stu-id="8fc31-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="8fc31-185">Daarom kan later worden verwezen naar de autorisatie wanneer fondsen worden vastgelegd op het moment van afhandeling.</span><span class="sxs-lookup"><span data-stu-id="8fc31-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="8fc31-186">Deze autorisatie is uniek voor de verkoper, betalingsconnector en verwerker.</span><span class="sxs-lookup"><span data-stu-id="8fc31-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="8fc31-187">Als een order die online is gemaakt, wordt opgehaald in de winkel, moeten dezelfde betalingsgegevens voor die order worden ingetrokken en gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="8fc31-188">Wanneer de oorspronkelijke details worden verstrekt als onderdeel van de aanvraag om een betaling vast te leggen op basis van de oorspronkelijke autorisatie, kan de betalingsverwerker de aanvraag afhandelen en de betaling vastleggen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="8fc31-189">Voor een juiste verwijzing naar de online order moet ook een connector voor betalingen zonder kaart beschikbaar zijn die dezelfde verwerker ondersteunt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="8fc31-190">Op deze manier kan het POS-systeem één verwerker hebben voor betalingen met kaart, maar heeft het ook toegang tot andere betalingsconnectors, zodat orders kunnen worden afgehandeld die in andere kanalen worden gemaakt met verschillende betalingsprocessors.</span><span class="sxs-lookup"><span data-stu-id="8fc31-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="8fc31-191">Ondersteunde scenario's</span><span class="sxs-lookup"><span data-stu-id="8fc31-191">Supported scenarios</span></span>

<span data-ttu-id="8fc31-192">De volgende scenario's voor betalingen voor meerdere kanalen worden ondersteund:</span><span class="sxs-lookup"><span data-stu-id="8fc31-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="8fc31-193">Online kopen, ophalen in winkel</span><span class="sxs-lookup"><span data-stu-id="8fc31-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="8fc31-194">Kopen in callcenter, ophalen in winkel</span><span class="sxs-lookup"><span data-stu-id="8fc31-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="8fc31-195">Kopen in winkel A, ophalen in winkel B</span><span class="sxs-lookup"><span data-stu-id="8fc31-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="8fc31-196">Kopen in winkel A, verzenden naar klant</span><span class="sxs-lookup"><span data-stu-id="8fc31-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="8fc31-197">Betalingen in het callcenter die worden toegewezen aan de "normale" betalingsfunctie, moeten worden gemarkeerd als **Vooruitbetalen** = **Ja** zodat ze worden weerspiegeld in het verschuldigde bedrag wanneer de order in het POS wordt ingetrokken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="8fc31-198">Betalingen van het type "Normaal" die geen vooruitbetaling zijn, worden niet herkend wanneer de order wordt ingetrokken in POS.</span><span class="sxs-lookup"><span data-stu-id="8fc31-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="8fc31-199">Variaties op deze scenario's worden ook ondersteund.</span><span class="sxs-lookup"><span data-stu-id="8fc31-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="8fc31-200">Een online order kan bijvoorbeeld regels bevatten die worden verzonden naar de klant en regels die worden opgehaald in een winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="8fc31-201">Alle opties voor orderafhandeling worden ondersteund via betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="8fc31-202">In de volgende secties worden de stappen voor elk scenario beschreven en wordt aangegeven hoe u het scenario kunt uitvoeren met behulp van demogegevens.</span><span class="sxs-lookup"><span data-stu-id="8fc31-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="8fc31-203">Online kopen, ophalen in winkel</span><span class="sxs-lookup"><span data-stu-id="8fc31-203">Buy online, pick up in store</span></span>

<span data-ttu-id="8fc31-204">Voordat u begint, moet u ervoor zorgen dat aan de volgende voorwaarden wordt voldaan:</span><span class="sxs-lookup"><span data-stu-id="8fc31-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="8fc31-205">U hebt een referentiewinkel waar de Adyen-connector is geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="8fc31-206">De optie **Betalingen voor meerdere kanalen** op de pagina **Gedeelde Commerce-parameters** wordt ingesteld op **Waar**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="8fc31-207">In latere versies wordt deze instelling verplaatst naar het werkgebied **Functiebeheer**, waar u de functie **Betalingen voor meerdere kanalen** kunt selecteren en op **Nu inschakelen** kunt klikken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="8fc31-208">De Adyen-betalingsconnector is geconfigureerd voor de Houston POS-kassa.</span><span class="sxs-lookup"><span data-stu-id="8fc31-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="8fc31-209">Het Retail Modern POS voor Windows of Android met ingebouwd hardwarestation   -of-</span><span class="sxs-lookup"><span data-stu-id="8fc31-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="8fc31-210">Modern POS voor iOS of cloud-POS met verbonden, gedeeld hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="8fc31-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="8fc31-211">Voer de volgende stappen uit om het scenario uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="8fc31-212">Maak in de referentiewinkel een bestelling die in de winkel moet worden afgehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="8fc31-213">Selecteer de juiste winkel **Houston**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="8fc31-214">Voer de stappen voor afrekenen uit en betaal met een testcreditcardnummer.</span><span class="sxs-lookup"><span data-stu-id="8fc31-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="8fc31-215">U kunt op de pagina met [testkaartnummers van Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) testcreditcardnummers vinden.</span><span class="sxs-lookup"><span data-stu-id="8fc31-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="8fc31-216">In Commerce gebruikt u de batchtaak **Orders synchroniseren** en het distributieschema **P-001** om de orders in de back-office te maken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="8fc31-217">Selecteer in de POS-pagina op de pagina Welkom de **orders waarvoor u** de order wilt ophalen om de orders voor de afhalen in de winkel te bekijken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="8fc31-218">Selecteer een of meer regels uit de order die is gemaakt in de referentiewinkel en selecteer **Verzamelen**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="8fc31-219">De order wordt opgehaald uit de back-office.</span><span class="sxs-lookup"><span data-stu-id="8fc31-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="8fc31-220">Wanneer de orderregeldetails worden opgehaald uit de back-office er een kaartbetaling wordt gedetecteerde die kan worden gebruikt voor betalingen voor meerdere kanalen, wordt aangegeven dat een betalingsmethode beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="8fc31-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="8fc31-221">Selecteer **Beschikbare betalingsmethode gebruiken** om de transactie te voltooien op basis van de kaartgegevens die in de referentiewinkel zijn ingevoerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="8fc31-222">De orderregels worden op de transactiepagina geladen en het openstaande saldo is 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="8fc31-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="8fc31-223">Selecteer het tabblad **Betalingen** om de regel met de betalingsmethode weer te geven die uit de online order is gehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="8fc31-224">Selecteer een betalingsmethode om de transactie te voltooien.</span><span class="sxs-lookup"><span data-stu-id="8fc31-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="8fc31-225">Kopen in callcenter, ophalen in winkel</span><span class="sxs-lookup"><span data-stu-id="8fc31-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="8fc31-226">Voer in Commerce op de pagina **Klantenservice** de naam **Karen Berg** in de zoekbalk in en selecteer **Zoeken**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="8fc31-227">Selecteer **Karen Berg** in de zoekresultaten.</span><span class="sxs-lookup"><span data-stu-id="8fc31-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="8fc31-228">Als Karen Berg is geladen op de pagina **Klantenservice**, selecteert u **Nieuwe verkooporder**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="8fc31-229">Selecteer **Koptekst** op de pagina Nieuwe verkooporder om de orderkoptekst weer te geven.</span><span class="sxs-lookup"><span data-stu-id="8fc31-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="8fc31-230">Op de pagina **Orderkoptekst** stelt u als locatie **Centraal** in en als magazijn **Houston**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="8fc31-231">Stel op het tabblad **Leveren** het veld **Leveringsmethode** in op **60** voor ophalen door klanten.</span><span class="sxs-lookup"><span data-stu-id="8fc31-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="8fc31-232">Selecteer **Regels** en voeg vervolgens een of meer regels toe aan de order.</span><span class="sxs-lookup"><span data-stu-id="8fc31-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="8fc31-233">Selecteer **Voltooien** om de ordervoltooiingsstroom in te voeren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="8fc31-234">Schuif naar beneden naar het betalingsgedeelte, selecteer **Toevoegen** en selecteer vervolgens een regel waarvoor het type betalingsmethode is ingesteld op **Kaarten**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="8fc31-235">Selecteer het plusteken (**+**) om een kaartbetaling toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="8fc31-236">Voer de details voor een testcreditcardnummer in dat u hebt gevonden op de [pagina met testkaartnummers van Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) en selecteer vervolgens **OK**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8fc31-237">Als het kaartmerk voor het ingevoerde kaartnummer afwijkt van het merk dat is geselecteerd toen de betaling werd gestart, wordt de betaling nog steeds uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="8fc31-238">In dat geval wordt de betaling echter geboekt naar de rekeningen die zijn toegewezen aan het kaartmerk dat u in stap 10 hebt geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="8fc31-239">Selecteer nogmaals **OK** om het dialoogvenster **Betalingen ordervoltooiingen** te sluiten.</span><span class="sxs-lookup"><span data-stu-id="8fc31-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="8fc31-240">Selecteer op de pagina **Overzicht van verkooporder** de optie **Indienen**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="8fc31-241">Selecteer in de POS-pagina op de pagina Welkom de **orders waarvoor u** de order wilt ophalen om de orders voor de afhalen in de winkel te bekijken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="8fc31-242">Selecteer een of meer regels uit de order die is gemaakt in de referentiewinkel en selecteer **Verzamelen**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="8fc31-243">De order wordt opgehaald uit de back-office.</span><span class="sxs-lookup"><span data-stu-id="8fc31-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="8fc31-244">Wanneer de orderregeldetails worden opgehaald uit de back-office er een kaartbetaling wordt gedetecteerde die kan worden gebruikt voor betalingen voor meerdere kanalen, wordt aangegeven dat een betalingsmethode beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="8fc31-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="8fc31-245">Selecteer **Beschikbare betalingsmethode gebruiken** om de transactie te voltooien op basis van de kaartgegevens die in de referentiewinkel zijn ingevoerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="8fc31-246">De orderregels worden op de transactiepagina geladen en het openstaande saldo is 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="8fc31-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="8fc31-247">Selecteer het tabblad **Betalingen** om de regel met de betalingsmethode weer te geven die uit de online order is gehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="8fc31-248">Selecteer een betalingsmethode om de transactie te voltooien.</span><span class="sxs-lookup"><span data-stu-id="8fc31-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="8fc31-249">Kopen in winkel A, ophalen in winkel B</span><span class="sxs-lookup"><span data-stu-id="8fc31-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="8fc31-250">Start het POS voor de Houston-winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="8fc31-251">Voeg op de pagina **Transactie** Karen Berg toe aan de transactie door met het numerieke toetsenblok **2001** in te voeren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="8fc31-252">Voeg een of meer regels toe aan de transactie.</span><span class="sxs-lookup"><span data-stu-id="8fc31-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="8fc31-253">Selecteer **Orders** om de orderopties weer te geven.</span><span class="sxs-lookup"><span data-stu-id="8fc31-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="8fc31-254">Selecteer **Alles verzamelen** en selecteer vervolgens de optie **Klantorder** wanneer u daarom wordt gevraagd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="8fc31-255">Voer **Seattle** in de zoekbalk in en selecteer de winkel in **Seattle** voor ophalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="8fc31-256">Selecteer **OK** om de huidige datum te accepteren als datum van ophalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="8fc31-257">Selecteer **Betaalkaart** om de betalingsreferentie te initiëren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="8fc31-258">Wijs de kaartbetaling toe voor het verschuldigde bedrag voor het deposito.</span><span class="sxs-lookup"><span data-stu-id="8fc31-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="8fc31-259">Voltooi de depositobetaling op de betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="8fc31-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="8fc31-260">Nadat het deposito is betaald, selecteert u de optie om dezelfde kaart te gebruiken voor afhandeling en wacht u totdat de order is voltooid.</span><span class="sxs-lookup"><span data-stu-id="8fc31-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="8fc31-261">Start het POS voor de Seattle-winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="8fc31-262">Selecteer in de POS-pagina op de pagina Welkom de **orders waarvoor u** de order wilt ophalen om de orders voor de afhalen in de winkel te bekijken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="8fc31-263">Selecteer een of meer regels uit de order die is gemaakt in de referentiewinkel en selecteer **Verzamelen**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="8fc31-264">De order wordt opgehaald uit de back-office.</span><span class="sxs-lookup"><span data-stu-id="8fc31-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="8fc31-265">Wanneer de orderregeldetails worden opgehaald uit de back-office er een kaartbetaling wordt gedetecteerde die kan worden gebruikt voor betalingen voor meerdere kanalen, wordt aangegeven dat een betalingsmethode beschikbaar is.</span><span class="sxs-lookup"><span data-stu-id="8fc31-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="8fc31-266">Selecteer **Beschikbare betalingsmethode gebruiken** om de transactie te voltooien op basis van de kaartgegevens die in de referentiewinkel zijn ingevoerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="8fc31-267">De orderregels worden op de transactiepagina geladen en het openstaande saldo is 0 (nul).</span><span class="sxs-lookup"><span data-stu-id="8fc31-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="8fc31-268">Selecteer het tabblad **Betalingen** om de regel met de betalingsmethode weer te geven die uit de online order is gehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="8fc31-269">Selecteer een betalingsmethode om de transactie te voltooien.</span><span class="sxs-lookup"><span data-stu-id="8fc31-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="8fc31-270">Kopen in winkel A, verzenden naar klant</span><span class="sxs-lookup"><span data-stu-id="8fc31-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="8fc31-271">Start het POS voor de Houston-winkel.</span><span class="sxs-lookup"><span data-stu-id="8fc31-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="8fc31-272">Voeg op de pagina **Transactie** Karen Berg toe aan de transactie door met het numerieke toetsenblok **2001** in te voeren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="8fc31-273">Voeg een of meer regels toe aan de transactie.</span><span class="sxs-lookup"><span data-stu-id="8fc31-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="8fc31-274">Selecteer **Orders** om de orderopties weer te geven.</span><span class="sxs-lookup"><span data-stu-id="8fc31-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="8fc31-275">Selecteer **Alles verzenden** en selecteer vervolgens de optie **Klantorder** wanneer daarom wordt gevraagd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="8fc31-276">Selecteer op de pagina met de verzendmethode **Standaard één dag** en selecteer vervolgens **OK** om de huidige datum als de verzenddatum te accepteren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="8fc31-277">Selecteer **OK** om de huidige datum te accepteren als datum van ophalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="8fc31-278">Selecteer **Betaalkaart** om de betalingsreferentie te initiëren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="8fc31-279">Wijs de kaartbetaling toe voor het verschuldigde bedrag voor het deposito.</span><span class="sxs-lookup"><span data-stu-id="8fc31-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="8fc31-280">Voltooi de depositobetaling op de betalingsterminal.</span><span class="sxs-lookup"><span data-stu-id="8fc31-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="8fc31-281">Nadat het deposito is betaald, selecteert u de optie om dezelfde kaart te gebruiken voor afhandeling en wacht u totdat de order is voltooid.</span><span class="sxs-lookup"><span data-stu-id="8fc31-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="8fc31-282">Wanneer de order wordt verzameld, verpakt en gefactureerd in de back-office, worden de betalingsdetails op het POS gebruikt om de fondsen vast te leggen voor de goederen die naar de klant worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="8fc31-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="8fc31-283">Scenariodetails</span><span class="sxs-lookup"><span data-stu-id="8fc31-283">Scenario details</span></span>

<span data-ttu-id="8fc31-284">Naast de basisscenario's die we zojuist hebben beschreven, zijn er diverse verbeteringen aangebracht in de betalings-SDK ter ondersteuning van betalingen voor meerdere kanalen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="8fc31-285">POS</span><span class="sxs-lookup"><span data-stu-id="8fc31-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="8fc31-286">Eén keer doorhalen voor klantorders</span><span class="sxs-lookup"><span data-stu-id="8fc31-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="8fc31-287">Voordat de functie voor betalingen voor meerdere kanalen werd geïmplementeerd, moesten klanten voor klantorders met deposito's die in het POS waren gemaakt hun kaart twee keer doorhalen: één keer om het deposito te betalen en één keer voor tokenisatie van de kaart voor de verdere afhandeling van de order.</span><span class="sxs-lookup"><span data-stu-id="8fc31-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="8fc31-288">Wanneer de functie voor tokenisatie voor meerdere kanalen is ingeschakeld, hoeven klanten de kaart nog maar één keer door te halen om het deposito te betalen en het bedrag te betalen voor voor goederen die later worden afgehandeld.</span><span class="sxs-lookup"><span data-stu-id="8fc31-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="8fc31-289">Bij afhandeling worden de geautoriseerde fondsen vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="8fc31-290">Voordat de functie voor tokenisatie voor meerdere kanalen was geïmplementeerd, werd er alleen een terugkerend kaarttoken gemaakt voor de verdere afhandeling van orders.</span><span class="sxs-lookup"><span data-stu-id="8fc31-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="8fc31-291">Daarom werden de fondsen voor de afhandeling in behandeling niet geautoriseerd en omdat deze fondsen niet werden vastgehouden voor die specifieke aankoop, was de kans minder groot dat deze later konden worden vastgelegd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="8fc31-292">Eén keer doorhalen wordt niet ondersteund Retail 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="8fc31-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="8fc31-293">Klantorders in versie 8.1.3 gebruiken dezelfde flow die werd gebruikt voordat de functie voor tokenisatie voor meerdere kanalen werd geïmplementeerd.</span><span class="sxs-lookup"><span data-stu-id="8fc31-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="8fc31-294">Kaarten die geen terugkerende kaarttokens kunnen uitgeven</span><span class="sxs-lookup"><span data-stu-id="8fc31-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="8fc31-295">Sommige kaarten kunnen niet worden gebruikt voor betalingen voor meerdere kanalen omdat deze geen ondersteuning bieden voor het uitgeven van terugkerende kaarttokens.</span><span class="sxs-lookup"><span data-stu-id="8fc31-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="8fc31-296">Wanneer een order wordt gemaakt in het POS en het deposito wordt betaald met behulp van een kaart die terugkerende kaarttokens niet ondersteunt, wordt de vorige flow voor de tokenisatie van kaarten gebruikt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="8fc31-297">Daarom moet een klant die een betaling wil aanbieden die voor de verdere orderafhandeling wordt gebruikt, een tweede kaart aanbieden.</span><span class="sxs-lookup"><span data-stu-id="8fc31-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="8fc31-298">Als de tweede kaart geen terugkerende kaarttokens ondersteunt, wordt de actie voor tokenisatie geweigerd en wordt de kassamedewerker gevraagd de klant te vragen om een andere kaart te tonen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="8fc31-299">Een andere kaart gebruiken</span><span class="sxs-lookup"><span data-stu-id="8fc31-299">Using a different card</span></span>

<span data-ttu-id="8fc31-300">Een klant die bij de winkel komt om een order op te halen, heeft de optie om een andere kaart te gebruiken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="8fc31-301">Wanneer de kassamedewerker het verzoek **Beschikbare betalingsmethode gebruiken** ontvangt op het moment dat dat de order wordt opgehaald, kan hij of zij vragen of de klant dezelfde kaart wil gebruiken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="8fc31-302">Als de klant de kaart kwijt is die is gebruikt om de order te maken en de order wil betalen met een andere kaart, kan de kassamedewerker de optie **Een andere betalingsmethode gebruiken** selecteren.</span><span class="sxs-lookup"><span data-stu-id="8fc31-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="8fc31-303">Als de klant later terugkomt om meer artikelen voor dezelfde order op te halen en de oorspronkelijke kaartautorisatie nog steeds geldig is, kan de kassamedewerker opnieuw vragen of de klant die kaart wil gebruiken.</span><span class="sxs-lookup"><span data-stu-id="8fc31-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="8fc31-304">Ongeldige autorisaties</span><span class="sxs-lookup"><span data-stu-id="8fc31-304">Invalid authorizations</span></span>

<span data-ttu-id="8fc31-305">Als de kaart die is gebruikt om een order te maken niet meer geldig is wanneer producten worden geselecteerd voor ophalen, mislukt de aanvraag voor het vastleggen van de betaling.</span><span class="sxs-lookup"><span data-stu-id="8fc31-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="8fc31-306">De POS-betalingsconnector probeert vervolgens een nieuwe autorisatie te maken en vast te leggen met dezelfde kaartgegevens.</span><span class="sxs-lookup"><span data-stu-id="8fc31-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="8fc31-307">Als de nieuwe autorisatie of vastlegging mislukt, wordt de kassier ervan op de hoogte gesteld dat de betaling niet kan worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="8fc31-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="8fc31-308">De kassamedewerker moet vervolgens een nieuwe betaling van de klant ontvangen.</span><span class="sxs-lookup"><span data-stu-id="8fc31-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="8fc31-309">Meerdere beschikbare betalingen</span><span class="sxs-lookup"><span data-stu-id="8fc31-309">Multiple available payments</span></span>

<span data-ttu-id="8fc31-310">Wanneer een order met meerdere betalingsmethoden en meerdere regels wordt opgehaald, ontvangt de kassier eerst de optie **Beschikbare betalingsmethode gebruiken**.</span><span class="sxs-lookup"><span data-stu-id="8fc31-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="8fc31-311">Als er meerdere kaarten zijn en de kassamedewerker **Beschikbare betalingsmethode gebruiken** selecteert, worden bestaande regels voor de kaartbetalingsmethode vastgelegd totdat aan het saldo wordt voldaan voor de goederen die momenteel worden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="8fc31-312">De kassamedewerker beschikt niet over de optie om de kaart te selecteren die moet worden gebruikt voor de goederen die worden opgehaald.</span><span class="sxs-lookup"><span data-stu-id="8fc31-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="8fc31-313">Verwante onderwerpen</span><span class="sxs-lookup"><span data-stu-id="8fc31-313">Related topics</span></span>

- [<span data-ttu-id="8fc31-314">Veelgestelde vragen over betalingen</span><span class="sxs-lookup"><span data-stu-id="8fc31-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="8fc31-315">Dynamics 365-betalingsconnector voor Adyen</span><span class="sxs-lookup"><span data-stu-id="8fc31-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="8fc31-316">BOPIS configureren in een Dynamics 365 Commerce-evaluatieomgeving</span><span class="sxs-lookup"><span data-stu-id="8fc31-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)


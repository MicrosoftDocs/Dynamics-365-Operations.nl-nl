---
title: Gegevensbronnen voor het hele bedrijf in de elektronische aangifte (ER)
description: In dit onderwerp wordt uitgelegd hoe u gegevensbronnen voor meerdere bedrijven kunt gebruiken in elektronische rapportage (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.translationtype: HT
ms.sourcegitcommit: 821d8927211d7ac3e479848c7e7bef9f650d4340
ms.openlocfilehash: 3ff94c49eed378d92e995782e73d76d669b44292
ms.contentlocale: nl-nl
ms.lasthandoff: 08/13/2018

---

# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="f40c4-103">Gegevensbronnen voor het hele bedrijf in de elektronische aangifte (ER)</span><span class="sxs-lookup"><span data-stu-id="f40c4-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="f40c4-104">U kunt ER-indelingen (elektronische rapportage) ontwerpen om uitgaande documenten te genereren in verschillende indelingen.</span><span class="sxs-lookup"><span data-stu-id="f40c4-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="f40c4-105">Wanneer een document wordt gegenereerd, roept een ER-indeling gegevensbronnen aan die zijn geconfigureerd in een corresponderende ER-modeltoewijzing.</span><span class="sxs-lookup"><span data-stu-id="f40c4-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="f40c4-106">Als u toegang wilt configureren tot toepassingstabellen voor het ophalen van records, kunt u ER-gegevensbronnen van het type **Tabelrecords** gebruiken.</span><span class="sxs-lookup"><span data-stu-id="f40c4-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="f40c4-107">Wanneer de tabel die toegang krijgt een gedeelde tabel is (een tabel waarin gegevens worden opgeslagen zonder een bedrijfs-id), retourneert deze gegevensbron alle records.</span><span class="sxs-lookup"><span data-stu-id="f40c4-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="f40c4-108">Wanneer de tabel die toegang krijgt, een bedrijfsafhankelijke tabel is (dat wil zeggen, een tabel waarin gegevens worden opgeslagen per bedrijf), retourneert deze gegevensbron alleen de records die zijn opgeslagen voor het huidige bedrijf (dat wil zeggen, de bedrijfscontext waaronder de ER-indeling wordt uitgevoerd).</span><span class="sxs-lookup"><span data-stu-id="f40c4-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="f40c4-109">Elke gegevensbron van het type **Tabelrecords** in een modeltoewijzing kan nu worden gemarkeerd als gegevensbron voor meerdere bedrijven.</span><span class="sxs-lookup"><span data-stu-id="f40c4-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="f40c4-110">Daarom kunt u gegevensbronnen van het type **Tabelrecords** gebruiken om toegang te krijgen tot gegevens voor meerdere bedrijven in toepassingstabellen.</span><span class="sxs-lookup"><span data-stu-id="f40c4-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="f40c4-111">Als u een gegevensbron als voor meerdere bedrijven markeert, treedt het volgende gedrag op:</span><span class="sxs-lookup"><span data-stu-id="f40c4-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="f40c4-112">Voor een gegevensbron die naar een gedeelde tabel verwijst, behalve CompanyInfo, retourneert de gegevensbron alle records die bestaan in de tabel waarnaar wordt verwezen.</span><span class="sxs-lookup"><span data-stu-id="f40c4-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="f40c4-113">Voor een gegevensbron die naar de tabel CompanyInfo verwijst, ook al is CompanyInfo een gedeelde tabel, retourneert de gegevensbron de records met de id van een bedrijf in het gedefinieerde bereik.</span><span class="sxs-lookup"><span data-stu-id="f40c4-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="f40c4-114">Voor een bedrijfsafhankelijke tabel retourneert de gegevensbron de records van de tabel waarnaar wordt verwezen die de id bevatten van een bedrijf uit het gedefinieerde bereik.</span><span class="sxs-lookup"><span data-stu-id="f40c4-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="f40c4-115">In het systeemquerydialoogvenster, wanneer de optie **Vragen om query** is ingeschakeld voor een gegevensbron die is gemarkeerd als voor meerdere bedrijven, kunt u handmatig een of meer bedrijven selecteren om op te nemen op het tabblad **Bedrijfsbereik**.</span><span class="sxs-lookup"><span data-stu-id="f40c4-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f40c4-116">Net als andere filters blijft het bedrijfsfilter behouden als laatst gebruikte waarde voor query's wanneer u een ER-indeling uitvoert.</span><span class="sxs-lookup"><span data-stu-id="f40c4-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="f40c4-117">Het filter wordt niet automatisch gewijzigd als u de waarde voor meerdere bedrijven voor een gegevensbron wijzigt.</span><span class="sxs-lookup"><span data-stu-id="f40c4-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="f40c4-118">Als u een andere waarde voor meerdere bedrijven wilt gebruiken voor een andere gegevensbron, verwijdert u de corresponderende gebruikersspecifieke sectie.</span><span class="sxs-lookup"><span data-stu-id="f40c4-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="f40c4-119">Voor elke gegevensbron die is gemarkeerd als voor meerdere bedrijven, kunt u de gewenste records selecteren met behulp van de functies **FILTER** en **WHERE** in ER-expressies.</span><span class="sxs-lookup"><span data-stu-id="f40c4-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="f40c4-120">Het veld **dataAreaID** veld kan ook worden gebruikt als een bedrijfs-id.</span><span class="sxs-lookup"><span data-stu-id="f40c4-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="f40c4-121">Op dit moment is het veld **dataAreaID** beperkt tot de volgende typen voorwaarden wanneer de functie **FILTER** wordt gebruikt:</span><span class="sxs-lookup"><span data-stu-id="f40c4-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="f40c4-122">Alleen voorwaarden die één veldvergelijking **dataAreaID** hebben, worden ondersteund.</span><span class="sxs-lookup"><span data-stu-id="f40c4-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="f40c4-123">Alleen vergelijkingen met expressies die niet afhankelijk zijn van lijstitems van records zijn toegestaan.</span><span class="sxs-lookup"><span data-stu-id="f40c4-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="f40c4-124">Daarom is de volgende expressie geldig.</span><span class="sxs-lookup"><span data-stu-id="f40c4-124">Therefore, the following expression is valid.</span></span>

```
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="f40c4-125">Het bereik omvat standaard alle bedrijven van de huidige toepassing.</span><span class="sxs-lookup"><span data-stu-id="f40c4-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="f40c4-126">Het kan echter worden beperkt.</span><span class="sxs-lookup"><span data-stu-id="f40c4-126">However, it can be restricted.</span></span> <span data-ttu-id="f40c4-127">Als u het bereik van toegang tot gegevens voor meerdere bedrijven voor één ER-indeling wilt beperken, wijst u een specifieke organisatiehiërarchie aan de indeling toe.</span><span class="sxs-lookup"><span data-stu-id="f40c4-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="f40c4-128">Wanneer een hiërarchie is gedefinieerd voor een ER-indeling, worden alleen records voor rechtspersonen die worden vertegenwoordigd in de hiërarchie, geretourneerd, zelfs als de indeling gegevensbronnen voor meerdere bedrijven aanroept.</span><span class="sxs-lookup"><span data-stu-id="f40c4-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="f40c4-129">Wanneer een verwijzing naar een hiërarchie die niet meer bestaat, wordt gedefinieerd voor een ER-indeling, wordt het standaardbereik toegepast en roept de indeling gegevensbronnen voor meerdere bedrijven aan.</span><span class="sxs-lookup"><span data-stu-id="f40c4-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="f40c4-130">In deze situatie worden records voor alle toepassingsbedrijven geretourneerd.</span><span class="sxs-lookup"><span data-stu-id="f40c4-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="f40c4-131">Houd er rekening mee dat wanneer de optie **Concept gebruiken** is ingeschakeld voor de toegewezene aan een enkele ER-indeling-organisatiehiërarchie, de rechtspersonen uit de conceptversie van deze hiërarchie worden gebruikt om het bereik te identificeren voor gegevensbronnen voor meerdere bedrijven.</span><span class="sxs-lookup"><span data-stu-id="f40c4-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="f40c4-132">Als de conceptversie niet bestaat, worden de rechtspersonen uit de laatst gepubliceerde versie van deze organisatiehiërarchie hiervoor gebruikt.</span><span class="sxs-lookup"><span data-stu-id="f40c4-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="f40c4-133">Houd er rekening mee dat wanneer de optie **Concept gebruiken** is uitgeschakeld voor de toegewezene aan een enkele ER-indeling-organisatiehiërarchie, de rechtspersonen uit de laatst gepubliceerde versie van deze hiërarchie worden gebruikt om het bereik te identificeren voor gegevensbronnen voor meerdere bedrijven.</span><span class="sxs-lookup"><span data-stu-id="f40c4-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="f40c4-134">Datumeffectiviteit van organisatiehiërarchieën wordt nog niet ondersteund in het ER-raamwerk.</span><span class="sxs-lookup"><span data-stu-id="f40c4-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="f40c4-135">De hiërarchie kan worden toegewezen aan een indeling op een bepaalde pagina die kan worden geopend vanuit het ER-werkgebied of met behulp van de menuoptie **Organisatiebeheer \> Elektronische rapportage \> Filter voor indelingen rechtspersoon**.</span><span class="sxs-lookup"><span data-stu-id="f40c4-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="f40c4-136">Voor toegang tot de pagina moet de bevoegdheid , de **Filters voor indelingen van rechtspersonen onderhouden** (ERMaintainFormatMappingLegalEntityFilters) worden verleend aan een gebruiker.</span><span class="sxs-lookup"><span data-stu-id="f40c4-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="f40c4-137">De bereikbeperking van op hiërarchie gebaseerde rechtspersonen voor de indeling wordt toegepast naast de beperking die de gebruiker handmatig kan opgeven in het systeemquerydialoogvenster.</span><span class="sxs-lookup"><span data-stu-id="f40c4-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="f40c4-138">Het snijpunt van deze beperkingen wordt gebruikt wanneer de indeling wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="f40c4-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="f40c4-139">Voor meer informatie over deze functie speelt u de taakbegeleiding **ER-toegang tot records van bedrijfsafhankelijke tabellen in de modus voor meerdere bedrijven** af, die deel uitmaakt van het bedrijfsproces 7.5.4.3 Onderdelen voor IT-services en -oplossingen aanschaffen/ontwikkelen (10677) en kan worden gedownload uit het [Microsoft Downloadcentrum](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="f40c4-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="f40c4-140">Deze taakbegeleiding begeleidt u door het proces van het configureren van een ER-modeltoewijzing en ER-indeling om toegang tot toepassingstabellen te krijgen in de modus voor meerdere bedrijven.</span><span class="sxs-lookup"><span data-stu-id="f40c4-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="f40c4-141">Download de volgende bestanden om de taakbegeleiding te voltooien:</span><span class="sxs-lookup"><span data-stu-id="f40c4-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="f40c4-142">ER-modelconfiguratie - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="f40c4-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="f40c4-143">ER-indelingsconfiguratie - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="f40c4-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)


---
title: ER-migratie opschonen
description: In dit onderwerp wordt uitgelegd hoe u de opschoonfunctie voor de ER-migratie kunt gebruiken om problemen met ER-sjablonen op te lossen.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: b09afc30c401e2dccfc4114261dc5e713c8c470c
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565510"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="bb1f8-103">ER-migratie opschonen</span><span class="sxs-lookup"><span data-stu-id="bb1f8-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="bb1f8-104">Wanneer u Finance-exemplaren beheert, kunt u besluiten uw het huidige exemplaar naar een andere locatie te migreren.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="bb1f8-105">U kunt bijvoorbeeld uw productie-exemplaar migreren naar een nieuwe sandbox-omgeving.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="bb1f8-106">Als u het ER-raamwerk (Electronic Reporting) voor het opslaan van sjablonen in de Microsoft Azure-blobopslag hebt geconfigureerd, verwijst de tabel **DocuValue** in de nieuwe sandbox-omgeving naar het blobopslag-exemplaar in de productieomgeving.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="bb1f8-107">Dit exemplaar kan echter niet worden geopend vanuit de sandbox-omgeving omdat het migratieproces de migratie van artefacten in de blobopslag niet ondersteunt.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="bb1f8-108">In de nieuwe sandbox-omgeving wordt echter wel verwezen naar de het blobopslagexemplaar in de sandbox-omgeving die nog niet beschikt over de ER-sjablonen.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="bb1f8-109">Er wordt een uitzondering gemaakt wanneer u een ER-indeling probeert uit te voeren die een sjabloon gebruikt om bedrijfsdocumenten te genereren, en ziet u een waarschuwing over de ontbrekende sjabloon.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="bb1f8-110">U kunt ook de opschoonoptie voor ER-migratie gebruiken om de ER-indelingsconfiguratie met de sjabloon te verwijderen en vervolgens opnieuw te importeren.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="bb1f8-111">[![Een ER-indeling uitvoeren](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="bb1f8-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="bb1f8-112">U ontvangt een vergelijkbare fout als u navigeert naar de pagina **Configuraties** (**Organisatiebeheer** \> **Elektronische rapport** \> **Configuraties**) en in de configuratiestructuur een ER-indelingsconfiguratie probeert te verwijderen die gebruikmaakt van een sjabloon.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="bb1f8-113">[![Een ER-indeling verwijderen](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="bb1f8-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="bb1f8-114">Voer de volgende stappen uit om problemen op te lossen met ER-sjablonen waartoe u geen toegang hebt.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="bb1f8-115">Ga naar de pagina **Organisatiebeheer** \> **Periodiek** \> **Migratie opschonen**.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="bb1f8-116">Selecteer een ER-indelingsconfiguratie die niet kan worden uitgevoerd of verwijderd.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-116">Select an ER format configuration that canâ€™t be executed or deleted.</span></span>
3.  <span data-ttu-id="bb1f8-117">Selecteer **Verwijderen**.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="bb1f8-118">Bevestig het verwijderen van de geselecteerde ER-indelingsconfiguratie.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="bb1f8-119">[Importeer](download-electronic-reporting-configuration-lcs.md) de verwijderde ER-indelingsconfiguratie in het huidige Finance-exemplaar.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="bb1f8-120">Toepasbaarheid</span><span class="sxs-lookup"><span data-stu-id="bb1f8-120">Applicability</span></span>

> <span data-ttu-id="bb1f8-121">[Belangrijk] De optie **Migratie opschonen** is alleen bedoeld voor ER-indelingsconfiguraties die niet-toegankelijke ER-sjablonen bevatten.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="bb1f8-122">Wanneer u een ER-indelingsconfiguratie verwijdert met de optie **Migratie opschonen**, worden de sjablonen verwijderd die betrekking hebben op de configuratie-artefacten in de enige toepassingsdatabase.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="bb1f8-123">De aanwezigheid van de relevante fysieke bestanden in de blobopslag wordt niet gevalideerd.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="bb1f8-124">Hierbij wordt ervan uitgegaan dat er geen is.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="bb1f8-125">Gebruik daarom niet de optie **Migratie opschonen** als alternatief voor de verwijderoptie van ER-configuraties op de pagina **Configuraties**.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="bb1f8-126">Gebruik de optie **Migratie opschonen** alleen als de verwijderoptie van ER-configuraties op de pagina **Configuraties** mislukt.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="bb1f8-127">Als u de de optie **Migratie opschonen** gebruikt om een ER-indelingsconfiguratie te verwijderen wanneer de desbetreffende sjabloon aanwezig is in de blobopslag, verwijdert u alleen de configuratie-artefacten in de toepassingsdatabase.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="bb1f8-128">Het fysieke bestand van de sjabloon in de blobopslag blijft aanwezig.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="bb1f8-129">Het overschrijven van bestanden in de blobopslag is niet langer toegestaan.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="bb1f8-130">Zie [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="bb1f8-131">Bovendien kunt u de configuraties die zijn verwijderd via Migratie opschonen in deze omgeving, niet meer opnieuw importeren.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="bb1f8-132">U kunt dit probleem oplossen door het bijbehorende bestand te zoeken in de blobopslag en het handmatig te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="bb1f8-133">[![Een ER-indeling importeren](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="bb1f8-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="bb1f8-134">Een vergelijkbaar probleem kan optreden als u uw toepassingsexemplaar migreert naar een andere locatie die meerdere keren als migratiedoel is gebruikt en waarvoor de blobopslag al ER-sjabloonbestanden bevat.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="bb1f8-135">Omdat u mogelijk verschillende ER-indelingsconfiguraties hebt, kan dit proces veel tijd in beslag nemen.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="bb1f8-136">Daarom verdient het gebruik van de functie [Back-up van ER-sjablonen](er-backup-storage-templates.md) voor het automatisch herstellen van sjablonen met verbroken verwijzingen de voorkeur.</span><span class="sxs-lookup"><span data-stu-id="bb1f8-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
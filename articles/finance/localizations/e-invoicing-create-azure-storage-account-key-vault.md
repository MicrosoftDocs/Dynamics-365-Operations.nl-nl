---
title: Een Azure-opslagaccount en een sleutelkluis maken
description: In dit onderwerp wordt uitgelegd hoe u een Azure-opslagaccount en een sleutelkluis maakt.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5a883011bbff6d82504497d739c07f1ada9e5f69
ms.sourcegitcommit: f860ac2b18f6bbbfc4a46b497baec2477105b116
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/19/2020
ms.locfileid: "4442140"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="0d9f3-103">Een Azure-opslagaccount en een sleutelkluis maken</span><span class="sxs-lookup"><span data-stu-id="0d9f3-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]



<span data-ttu-id="0d9f3-104">De invoegtoepassing voor elektronische facturering neemt de verantwoordelijkheid voor het opslaan van al uw bedrijfsgegevens in de Microsoft Azure-resources die het eigendom zijn van uw bedrijf.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="0d9f3-105">Om er zeker van te zijn dat de service correct werkt en dat alle bedrijfsgegevens die nodig zijn voor en die worden gegenereerd door de invoegtoepassing voor elektronische facturering alleen worden gebruikt door de invoegtoepassing, moet u twee hoofd Azure-resources maken:</span><span class="sxs-lookup"><span data-stu-id="0d9f3-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="0d9f3-106">Een Azure-opslagaccount (Blob-opslag) voor het opslaan van elektronische facturen</span><span class="sxs-lookup"><span data-stu-id="0d9f3-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="0d9f3-107">Een Azure-sleutelkluis voor het opslaan van certificaten en de URI (Uniform Resource Identifier) van het opslagaccount</span><span class="sxs-lookup"><span data-stu-id="0d9f3-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="0d9f3-108">Een speciale sleutelkluis-resource en de Blob-opslag van de klant moeten specifiek worden toegewezen voor gebruik met de invoegtoepassing voor elektronische facturering.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="0d9f3-109">Vereisten</span><span class="sxs-lookup"><span data-stu-id="0d9f3-109">Prerequisites</span></span>

<span data-ttu-id="0d9f3-110">Voordat u de stappen in dit onderwerp kunt voltooien, moet u controleren of de volgende zijn uitgevoerd:</span><span class="sxs-lookup"><span data-stu-id="0d9f3-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="0d9f3-111">Maak een sleutelkluis-resource in Azure.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="0d9f3-112">Zie [Over Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="0d9f3-113">Maak een Azure-opslagaccount (Blob-opslag).</span><span class="sxs-lookup"><span data-stu-id="0d9f3-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="0d9f3-114">Zie [Azure-opslagaccount onderhouden](https://docs.microsoft.com/azure/storage/blobs/) voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="0d9f3-115">Overzicht</span><span class="sxs-lookup"><span data-stu-id="0d9f3-115">Overview</span></span>

<span data-ttu-id="0d9f3-116">In dit onderwerp voert u twee belangrijke stappen uit:</span><span class="sxs-lookup"><span data-stu-id="0d9f3-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="0d9f3-117">Stel het Azure-opslagaccount in om de URI van het opslagaccount op te halen.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="0d9f3-118">Stel de sleutelkluis in om de URI van het opslagaccount op te slaan.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="0d9f3-119">Stel het Azure-opslagaccount in om de URI van het opslagaccount op te halen</span><span class="sxs-lookup"><span data-stu-id="0d9f3-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="0d9f3-120">Open het opslagaccount dat u wilt gebruiken met de invoegtoepassing voor elektronische facturering.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="0d9f3-121">Ga naar **Blob-service** \> **Containers** en maak een nieuwe container.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-121">Go to **Blob service** \> **Containers**, and create a new container.</span></span>
3. <span data-ttu-id="0d9f3-122">Voer een naam in voor de container en stel het veld **Openbaar toegangsniveau** in op **Privé (geen anonieme toegang)**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="0d9f3-123">Open de container en ga naar **instellingen \> Toegangsbeleid**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="0d9f3-124">Selecteer **Beleid toevoegen** om een opgeslagen toegangsbeleid toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="0d9f3-125">Stel de velden **ID** en **Machtigingen** naar wens in.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="0d9f3-126">In het veld **Machtigingen** moet u alle machtigingen selecteren.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![Machtiging voor Blob-opslag verlenen](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="0d9f3-128">Voer de begin- en vervaldatum in.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="0d9f3-129">De vervaldatum moet in de toekomst liggen.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="0d9f3-130">Selecteer **OK** om het beleid op te slaan en sla uw wijzigingen vervolgens op in de container.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="0d9f3-131">Ga terug naar het opslagaccount en open **Opslagverkenner (Preview)**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="0d9f3-132">Klik met de rechtermuisknop op de container en selecteer **Shared Access Signature ophalen**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="0d9f3-133">Kopieer in het dialoogvenster **Shared Access Signature** de waarde in het veld **URI** en sla deze op.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="0d9f3-134">Deze waarde wordt in de volgende procedure gebruikt en wordt de *Shared Access Signature-URI* genoemd.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![De URI-waarde selecteren en kopiëren](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="0d9f3-136">Stel de sleutelkluis in om de URI van het opslagaccount op te slaan</span><span class="sxs-lookup"><span data-stu-id="0d9f3-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="0d9f3-137">Open de sleutelkluis die u wilt gebruiken met de invoegtoepassing voor elektronische facturering.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="0d9f3-138">Ga naar **instellingen** \> **Geheimen** en selecteer **Genereren/importeren** om een nieuw geheim te maken.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-138">Go to **Settings** \> **Secrets**, and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="0d9f3-139">Selecteer op de pagina **Een geheim maken** in het veld **Opties voor uploaden** de optie **Handmatig**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="0d9f3-140">Voer de naam van het geheim in.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-140">Enter the name of the secret.</span></span> <span data-ttu-id="0d9f3-141">Deze naam wordt gebruikt tijdens de installatie van de service in Regulatory Configuration Service (RCS) en wordt de *geheime naam van de sleutelkluis* genoemd.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="0d9f3-142">Selecteer in het veld **Waarde** de **Shared Access Signature URI** en selecteer **Maken**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-142">In the **Value** field, select **Shared Access Signature URI**, and then select **Create**.</span></span>
6. <span data-ttu-id="0d9f3-143">Stel het toegangsbeleid in om de invoegtoepassing voor elektronische facturering het juiste niveau van beveiligde toegang te verlenen tot het geheim dat u hebt gemaakt.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="0d9f3-144">Ga naar **Instellingen \> Toegangsbeleid** en selecteer **Toegangsbeleid toevoegen**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-144">Go to **Settings \> Access policy**, and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="0d9f3-145">Stel de geheime machtigingen voor de bewerkingen **Get** en **List** in.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![Toegang tot de service verlenen](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="0d9f3-147">Stel de certificaatmachtigingen voor de bewerkingen **Get** en **List** in.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![Certificaatmachtiging verlenen](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="0d9f3-149">Selecteer in het veld **Principal** de principal door **Invoegtoepassing voor elektronische facturering** toe te voegen.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="0d9f3-150">Selecteer **Toevoegen** en selecteer **Sleutelkluiswijzigingen opslaan**.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-150">Select **Add**, and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="0d9f3-151">Kopieer op de pagina **Overzicht** de **DNS-naam**-waarde voor de sleutelkluis.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="0d9f3-152">Deze waarde wordt gebruikt tijdens de installatie van de service in RCS en wordt de *sleutel-kluis-URI* genoemd.</span><span class="sxs-lookup"><span data-stu-id="0d9f3-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>

---
title: Taak voor het opruimen van voorhanden artikelen in magazijnbeheer
description: Dit onderwerp beschrijft de taak voor het opruimen van voorhanden artikelen, waardoor de systeemprestaties worden verbeterd door gerelateerde maar onnodige records te identificeren en te verwijderen.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 93c77434a912554dab486b42c0c9fffd68cf9435
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/15/2021
ms.locfileid: "5225998"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="841d0-103">Taak voor het opruimen van voorhanden artikelen in magazijnbeheer</span><span class="sxs-lookup"><span data-stu-id="841d0-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="841d0-104">De prestaties van query's die worden gebruikt om de voorhanden voorraad te berekenen, worden beïnvloed door het aantal records in de desbetreffende tabellen.</span><span class="sxs-lookup"><span data-stu-id="841d0-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="841d0-105">Een manier om de prestaties te verbeteren is om het aantal records te verminderen dat moet worden doorzocht.</span><span class="sxs-lookup"><span data-stu-id="841d0-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="841d0-106">Dit onderwerp beschrijft de taak voor het opruimen van voorhanden artikelen, waarmee overbodige records worden verwijderd uit de tabellen InventSum en WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="841d0-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="841d0-107">In deze tabellen wordt informatie over voorhanden artikelen opgeslagen voor artikelen die zijn ingeschakeld voor magazijnbeheerverwerking.</span><span class="sxs-lookup"><span data-stu-id="841d0-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="841d0-108">(Deze artikelen worden ook wel WHS-artikelen genoemd.) Het verwijderen van deze records kan de prestaties van berekeningen van voorhanden voorraad aanzienlijk verbeteren.</span><span class="sxs-lookup"><span data-stu-id="841d0-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="841d0-109">Wat de opruimtaak doet</span><span class="sxs-lookup"><span data-stu-id="841d0-109">What the cleanup job does</span></span>

<span data-ttu-id="841d0-110">Met de taak voor het opruimen van voorhanden artikelen worden alle records in de tabellen WHSInventReserve en InventSum verwijderd die als veldwaarden *0* (nul) hebben.</span><span class="sxs-lookup"><span data-stu-id="841d0-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="841d0-111">Deze records kunnen worden verwijderd omdat ze niet bijdragen aan de informatie over voorhanden artikelen.</span><span class="sxs-lookup"><span data-stu-id="841d0-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="841d0-112">De taak verwijdert alleen records die zich onder het niveau **Locatie** bevinden.</span><span class="sxs-lookup"><span data-stu-id="841d0-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="841d0-113">Als negatieve fysieke voorraad is toegestaan, kan de opruimtaak mogelijk niet alle relevante items verwijderen.</span><span class="sxs-lookup"><span data-stu-id="841d0-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="841d0-114">De reden voor deze beperking is dat de taak een bijzonder scenario moet toestaan waarbij een nummerplaat meerdere serienummers heeft en een van dezeserie nummers negatief is geworden.</span><span class="sxs-lookup"><span data-stu-id="841d0-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="841d0-115">Stel dat het systeem nul voorhanden voorraad op het niveau van de nummerplaat heeft wanneer een nummerplaat beschikt over + 1 st. van serienummer 1 en –1 st. van serienummer 2.</span><span class="sxs-lookup"><span data-stu-id="841d0-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="841d0-116">Voor dit speciale scenario wordt geprobeerd eerst vanaf lagere niveaus te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="841d0-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="841d0-117">De opruimtaak plannen en configureren</span><span class="sxs-lookup"><span data-stu-id="841d0-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="841d0-118">De taak voor het opruimen van voorhanden artikelen is beschikbaar op **Voorraadbeheer \> Periodieke taken \> opruimen \> Opruimen van voorhanden artikelen in magazijnbeheer**.</span><span class="sxs-lookup"><span data-stu-id="841d0-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="841d0-119">Gebruik de standaardtaakinstellingen om het bereik en het schema voor het uitvoeren van de taak te bepalen.</span><span class="sxs-lookup"><span data-stu-id="841d0-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="841d0-120">Daarnaast worden de volgende instellingen geboden:</span><span class="sxs-lookup"><span data-stu-id="841d0-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="841d0-121">**Verwijderen indien niet bijgewerkt voor dit aantal dagen**: voer het minimum aantal dagen in dat moet worden gewacht voordat een voorhanden artikel wordt verwijderd waarvoor de hoeveelheid is gedaald naar nul.</span><span class="sxs-lookup"><span data-stu-id="841d0-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="841d0-122">Met deze instelling kunt u het risico beperken dat voorhanden items worden verwijderd die nog worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="841d0-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="841d0-123">Als u wilt dat het opruimen zo snel mogelijk wordt uitgevoerd, geeft u *0* (nul) op of laat u het veld leeg.</span><span class="sxs-lookup"><span data-stu-id="841d0-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="841d0-124">**Maximale uitvoeringstijd (uren)**: voer de maximale uitvoeringstijd van de opruimingstaak in uren in.</span><span class="sxs-lookup"><span data-stu-id="841d0-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="841d0-125">Als de taak niet is voltooid voordat deze tijd is verstreken, wordt het werk opgeslagen dat tot dusverre met de taak is uitgevoerd en vervolgens wordt de taak gesloten.</span><span class="sxs-lookup"><span data-stu-id="841d0-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="841d0-126">Deze mogelijkheid is vooral relevant voor implementaties met een hoog voorraadgebruik.</span><span class="sxs-lookup"><span data-stu-id="841d0-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="841d0-127">In deze gevallen moet u de taak zo plannen dat deze wordt uitgevoerd op momenten dat de systeembelasting zo licht mogelijk is.</span><span class="sxs-lookup"><span data-stu-id="841d0-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="841d0-128">Als u wilt dat de batchtaak wordt uitgevoerd totdat deze is voltooid, geeft u *0* (nul) op of laat u het veld leeg.</span><span class="sxs-lookup"><span data-stu-id="841d0-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="841d0-129">Deze instelling is alleen beschikbaar als de gerelateerde functie is [ingeschakeld in uw systeem](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="841d0-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="841d0-130">Hoewel u de taak tijdens normale kantooruren kunt uitvoeren, raden we u aan om de taak buiten kantooruren uit te voeren.</span><span class="sxs-lookup"><span data-stu-id="841d0-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="841d0-131">Op deze manier kunt u conflicten voorkomen die zich kunnen voordoen als een gebruiker met een record werkt die ook wordt opgeruimd.</span><span class="sxs-lookup"><span data-stu-id="841d0-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="841d0-132">Als de taak een record voor een artikel probeert te verwijderen terwijl die record door een andere gebruiker wordt gebruikt, treedt er een impasse op voor de opruimtaak of de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="841d0-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="841d0-133">Wanneer de taak wordt uitgevoerd, heeft deze een toegewezen grootte van 100.</span><span class="sxs-lookup"><span data-stu-id="841d0-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="841d0-134">Met andere woorden, er wordt geprobeerd één keer door te voeren voor elke 100 verwijderingen.</span><span class="sxs-lookup"><span data-stu-id="841d0-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="841d0-135">Omdat sommige verwijderingen echter zijn gebaseerd op een set, kunnen er scenario's zijn waarin meer dan 100 records in dezelfde transactie kunnen worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="841d0-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="841d0-136">Hierdoor kunnen er soms nog steeds vergendelingsescalaties optreden.</span><span class="sxs-lookup"><span data-stu-id="841d0-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="841d0-137">Mogelijke gevolgen voor de gebruiker</span><span class="sxs-lookup"><span data-stu-id="841d0-137">Possible user impact</span></span>

<span data-ttu-id="841d0-138">Gebruikers kunnen last hebben van het probleem als met de taak voor het opruimen van voorhanden artikelen alle records voor een bepaald niveau (zoals het nummerplaatniveau) worden verwijderd.</span><span class="sxs-lookup"><span data-stu-id="841d0-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="841d0-139">In dit geval werkt de functionaliteit voor de observatie dat voorraad voorheen beschikbaar was op een nummerplaat mogelijk niet correct omdat de relevante voorhanden artikelen niet meer beschikbaar zijn.</span><span class="sxs-lookup"><span data-stu-id="841d0-139">In this case, the functionality for seeing that inventory was previously available on-hand at a license plate might not work as expected because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="841d0-140">Dit kan bijvoorbeeld worden ervaren in de volgende situaties:</span><span class="sxs-lookup"><span data-stu-id="841d0-140">This can, for example, be experienced in the following situations:</span></span>

- <span data-ttu-id="841d0-141">In de **Voorhanden voorraad** wanneer de gebruiker de voorwaarde **Hoeveelheid \<\>0** deselecteert of de voorwaarde **Afgesloten transacties** selecteert in de instellingen **Weergave van dimensies**.</span><span class="sxs-lookup"><span data-stu-id="841d0-141">On the **On-hand list**, when the user deselects the condition **Quantity \<\> 0** or selects the condition **Closed transactions** in the **Dimensions display** settings.</span></span>
- <span data-ttu-id="841d0-142">In een **Fysieke voorraad per voorraaddimensie**-rapport voor perioden in het verleden wanneer de gebruiker de parameter **Begindatum** instelt.</span><span class="sxs-lookup"><span data-stu-id="841d0-142">In a **Physical inventory by inventory dimension** report for past periods, when the user sets the **As of date** parameter.</span></span>

<span data-ttu-id="841d0-143">De prestatieverbetering die de opschoningstaak oplevert moet deze kleine verliezen in functionaliteit echter goed maken.</span><span class="sxs-lookup"><span data-stu-id="841d0-143">However, the performance improvement that the cleanup job provides should make up for these small losses in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="841d0-144">De instelling voor maximale uitvoeringstijd beschikbaar maken</span><span class="sxs-lookup"><span data-stu-id="841d0-144">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="841d0-145">De instelling **Maximale uitvoeringstijd** is standaard niet beschikbaar.</span><span class="sxs-lookup"><span data-stu-id="841d0-145">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="841d0-146">Als u deze functie wilt gebruiken, moet u [functiebeheer](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) gebruiken om de gerelateerde functie in uw systeem in te schakelen.</span><span class="sxs-lookup"><span data-stu-id="841d0-146">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="841d0-147">Schakel in het werkgebied **Functiebeheer** de functie als volgt in:</span><span class="sxs-lookup"><span data-stu-id="841d0-147">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="841d0-148">**Module:** *Magazijnbeheer*</span><span class="sxs-lookup"><span data-stu-id="841d0-148">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="841d0-149">**Functienaam:** *Maximale uitvoeringstijd voor de taak voor het opruimen van voorhanden artikelen in magazijnbeheer*</span><span class="sxs-lookup"><span data-stu-id="841d0-149">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
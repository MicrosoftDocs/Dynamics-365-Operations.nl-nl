---
title: Prestaties van planningsengine verbeteren
description: Dit onderwerp biedt informatie over de planningsengine en over hoe u de prestaties kunt verbeteren.
author: ChristianRytt
manager: tfehr
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: roxanad
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: 18a9b7ed4cd26a806002fb1b4684de1e84f39889
ms.sourcegitcommit: c55fecae96b4bb27bc313ba10a97eddb9c91350a
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/12/2020
ms.locfileid: "3989265"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="ba7ac-103">Prestaties van planningsengine verbeteren</span><span class="sxs-lookup"><span data-stu-id="ba7ac-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="ba7ac-104">De planningsengine voor resources wordt gebruikt bij het plannen van routes voor geplande en vrijgegeven productieorders.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="ba7ac-105">De engine werd oorspronkelijk uitgebracht als onderdeel van Dynamics AX 2012 en heeft sinds de release verschillende verbeteringen ondergaan.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="ba7ac-106">Het [probleem van taakplanning op de werkvloer](https://en.wikipedia.org/wiki/Job_shop_scheduling) is een uitzonderlijk ingewikkelde gecombineerde kwestie waarbij de oplossingstijd exponentieel toeneemt met het aantal beslissingsvariabelen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="ba7ac-107">Vaak hebben klanten productieroutes en gerelateerde gegevens ingesteld op een manier die leidt tot een planningsprobleem dat niet binnen redelijke tijd kan worden opgelost, zelfs op de meest moderne hardware.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="ba7ac-108">Dit onderwerp helpt u bij het begrijpen van de planningsengine en biedt inzicht in hoe een bepaalde instelling invloed op de prestaties kan hebben.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="ba7ac-109">Wanneer u de prestaties van de planning wilt verbeteren, is het raadzaam de complexiteit te reduceren van het probleem dat door de engine moet worden opgelost.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="ba7ac-110">Enkele van de belangrijkste factoren die van invloed kunnen zijn op de prestaties zijn:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="ba7ac-111">Routes met veel bewerkingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-111">Routes with many operations</span></span>
- <span data-ttu-id="ba7ac-112">Routes met parallelle bewerkingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-112">Routes with parallel operations</span></span>
- <span data-ttu-id="ba7ac-113">Bewerkingen met een hoeveelheid resources van meer dan één</span><span class="sxs-lookup"><span data-stu-id="ba7ac-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="ba7ac-114">Bewerkingen met veel van toepassing zijnde resources</span><span class="sxs-lookup"><span data-stu-id="ba7ac-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="ba7ac-115">Gebruik van harde koppelingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-115">Use of hard links</span></span>
- <span data-ttu-id="ba7ac-116">Gebruik van eindige capaciteit</span><span class="sxs-lookup"><span data-stu-id="ba7ac-116">Use of finite capacity</span></span>
- <span data-ttu-id="ba7ac-117">Het aantal verschillende kalenders dat wordt gebruikt</span><span class="sxs-lookup"><span data-stu-id="ba7ac-117">The number of different calendars used</span></span>
- <span data-ttu-id="ba7ac-118">Het aantal werktijdvakken per dag in de kalender</span><span class="sxs-lookup"><span data-stu-id="ba7ac-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="ba7ac-119">Totale duur van de route</span><span class="sxs-lookup"><span data-stu-id="ba7ac-119">Total duration of the route</span></span>
- <span data-ttu-id="ba7ac-120">Gelijktijdige uitvoering van meerdere planningsengines</span><span class="sxs-lookup"><span data-stu-id="ba7ac-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="ba7ac-121">Overzicht van de basisplanningsstroom</span><span class="sxs-lookup"><span data-stu-id="ba7ac-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="ba7ac-122">Om inzicht te krijgen in de prestaties van een bepaalde instelling, is het belangrijk dat u begrijpt hoe het proces verloopt, zowel binnen de engine als in de omringende X++-code.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="ba7ac-123">Het basisproces voor het plannen van een order bestaat uit drie hoofdstappen:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="ba7ac-124">**Gegevens laden**: hier worden de X++-gegevensmodellen omgezet in het interne gegevensmodel van de engine in de vorm van taken en beperkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="ba7ac-125">**Planning**: dit is de hoofdbron voor de planning waarbij het opgegeven model en de beperkingen worden verwerkt en een resultaat wordt gegenereerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="ba7ac-126">Tijdens dit proces zal de engine waar nodig de werktijdinformatie en bestaande capaciteitsreserveringen opvragen van X++.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="ba7ac-127">**Gegevens opslaan**: de engine resulteert in de vorm van reserveringstijdvakken voor taakcapaciteit en wordt verwerkt door X++-code om capaciteitsreserveringen op te slaan en de begin- en eindtijd van de taken/bewerking/order bij te werken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="ba7ac-128">Gegevens in de engine laden</span><span class="sxs-lookup"><span data-stu-id="ba7ac-128">Load data into the engine</span></span>

<span data-ttu-id="ba7ac-129">De planningsengine heeft een meer abstract gegevensmodel dan de Supply Chain Management-database omdat deze is gemaakt als een algemene engine die verschillende gegevensbronnen kan verwerken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="ba7ac-130">De concepten van route, secundaire bewerkingen en uitvoeringstijd moeten worden 'vertaald' naar het algemene taak- en beperkingsmodel dat door de engine wordt gehanteerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="ba7ac-131">De logica voor het opbouwen van het model bevat een aanzienlijke hoeveelheid bedrijfslogica en is afhankelijk van de brongegevens.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="ba7ac-132">De verantwoordelijke X++-klasse is `WrkCtrScheduler` en deze heeft afgeleide klassen voor geplande productieorders, vrijgegeven productieorders en projectprognoses.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="ba7ac-133">Een voorbeeld hiervan is een route die wordt weergegeven in de volgende tabel en afbeelding, die relatief eenvoudig lijkt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="ba7ac-134">Bew.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-134">Oper.</span></span> <span data-ttu-id="ba7ac-135">Nr.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-135">No.</span></span> | <span data-ttu-id="ba7ac-136">Prioriteit</span><span class="sxs-lookup"><span data-stu-id="ba7ac-136">Priority</span></span> | <span data-ttu-id="ba7ac-137">Insteltijd</span><span class="sxs-lookup"><span data-stu-id="ba7ac-137">Setup time</span></span> | <span data-ttu-id="ba7ac-138">Uitvoeringstijd</span><span class="sxs-lookup"><span data-stu-id="ba7ac-138">Run time</span></span> | <span data-ttu-id="ba7ac-139">Wachttijd na</span><span class="sxs-lookup"><span data-stu-id="ba7ac-139">Queue time after</span></span> | <span data-ttu-id="ba7ac-140">Hoeveelheid resources</span><span class="sxs-lookup"><span data-stu-id="ba7ac-140">Quantity of resources</span></span> | <span data-ttu-id="ba7ac-141">Volgende</span><span class="sxs-lookup"><span data-stu-id="ba7ac-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ba7ac-142">10</span><span class="sxs-lookup"><span data-stu-id="ba7ac-142">10</span></span> | <span data-ttu-id="ba7ac-143">Primair</span><span class="sxs-lookup"><span data-stu-id="ba7ac-143">Primary</span></span> | <span data-ttu-id="ba7ac-144">1.00</span><span class="sxs-lookup"><span data-stu-id="ba7ac-144">1.00</span></span> | <span data-ttu-id="ba7ac-145">2.00</span><span class="sxs-lookup"><span data-stu-id="ba7ac-145">2.00</span></span> | | <span data-ttu-id="ba7ac-146">1</span><span class="sxs-lookup"><span data-stu-id="ba7ac-146">1</span></span> | <span data-ttu-id="ba7ac-147">20</span><span class="sxs-lookup"><span data-stu-id="ba7ac-147">20</span></span> |
| <span data-ttu-id="ba7ac-148">10</span><span class="sxs-lookup"><span data-stu-id="ba7ac-148">10</span></span> | <span data-ttu-id="ba7ac-149">Secundair&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="ba7ac-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="ba7ac-150">1</span><span class="sxs-lookup"><span data-stu-id="ba7ac-150">1</span></span> | <span data-ttu-id="ba7ac-151">20</span><span class="sxs-lookup"><span data-stu-id="ba7ac-151">20</span></span> |
| <span data-ttu-id="ba7ac-152">20</span><span class="sxs-lookup"><span data-stu-id="ba7ac-152">20</span></span> | <span data-ttu-id="ba7ac-153">Primair</span><span class="sxs-lookup"><span data-stu-id="ba7ac-153">Primary</span></span> | | <span data-ttu-id="ba7ac-154">3.00</span><span class="sxs-lookup"><span data-stu-id="ba7ac-154">3.00</span></span> | <span data-ttu-id="ba7ac-155">1.00</span><span class="sxs-lookup"><span data-stu-id="ba7ac-155">1.00</span></span> | <span data-ttu-id="ba7ac-156">3</span><span class="sxs-lookup"><span data-stu-id="ba7ac-156">3</span></span> | <span data-ttu-id="ba7ac-157">0</span><span class="sxs-lookup"><span data-stu-id="ba7ac-157">0</span></span> |

<span data-ttu-id="ba7ac-158">![Voorbeeld van routediagram](media/scheduling-engine-route.png "Voorbeeld van routediagram")</span><span class="sxs-lookup"><span data-stu-id="ba7ac-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="ba7ac-159">Wanneer u dit verzendt naar de engine, wordt het opgesplitst in acht taken, zoals wordt weergegeven in de volgende afbeelding (selecteer de afbeelding om deze te vergroten).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="ba7ac-160">[![Taken van planningsengine](media/scheduling-engine-jobs.png "Taken van planningsengine")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="ba7ac-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="ba7ac-161">De standaardkoppeling tussen twee taken is `FinishStart`, wat inhoudt dat de eindtijd van de ene taak vóór de begintijd van een andere taak moet liggen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="ba7ac-162">Aangezien de instellingen moeten worden uitgevoerd door dezelfde resource die het proces later uitvoert, zijn er `OnSameResource`-beperkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="ba7ac-163">Tussen de taken voor primaire en secundaire bewerking voor 10 zijn er `StartStart`- en `FinishFinish`-koppelingen, wat betekent dat de taken zowel op hetzelfde moment moeten beginnen als eindigen en dat er `NotOnSameResource`-beperkingen zijn, waardoor niet dezelfde resource voor primaire en secundaire bewerking wordt gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="ba7ac-164">Voor bewerking 20, waarbij de hoeveelheid resources is ingesteld op 3, is de procestaak opgesplitst in drie afzonderlijke taken waarbij alle taken op exact dezelfde tijd moeten worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="ba7ac-165">In dit geval is de routegroep zo ingesteld dat er geen capaciteit voor de wachtrij wordt gereserveerd, waardoor er slechts één taak is voor de wachtrij.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="ba7ac-166">De planningsengine begrijpt alleen de concepten van taken en heeft geen idee van bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="ba7ac-167">Dit betekent dat de bewerkingen bij het uitvoeren van bewerkingstaken ook worden opgesplitst in taken, hoewel deze niet worden vastgelegd in de database.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="ba7ac-168">Voor elke taak wordt ook gedefinieerd wat de vereiste taakcapaciteit is (het aantal seconden dat is vereist).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="ba7ac-169">Afhankelijk van de manier waarop de resourcevereisten zijn gedefinieerd, kunnen we voor elke taak ook een lijst verzenden met alle mogelijke resources waarvoor de taak kan worden uitgevoerd en wat de capaciteitsbehoefte voor die specifieke resource is.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="ba7ac-170">Hoewel de lijst met toepasselijke resources tijdens het maken van het model wordt verzonden, moet de engine nog steeds zorgen dat de resourcetoewijzing werkelijk geldig is voor de gehele taakduur.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="ba7ac-171">Interne werking van planningsengine</span><span class="sxs-lookup"><span data-stu-id="ba7ac-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="ba7ac-172">Interface van planningsengine</span><span class="sxs-lookup"><span data-stu-id="ba7ac-172">Scheduling engine interface</span></span>

<span data-ttu-id="ba7ac-173">Om een idee te krijgen van de interne werking van de engine, kunt u het beste de functionaliteit bekijken die extern wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="ba7ac-174">In X++ is `WrkCtrSchedulerEngineInterface` de hoofdinterface.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="ba7ac-175">Deze bevat de methoden die in de volgende subsecties worden beschreven.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="ba7ac-176">Algemene engine</span><span class="sxs-lookup"><span data-stu-id="ba7ac-176">General engine</span></span>

| <span data-ttu-id="ba7ac-177">**methode**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-177">**Method**</span></span> | <span data-ttu-id="ba7ac-178">**Doel**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="ba7ac-179">Alle geladen taken worden gepland en de foutcode wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="ba7ac-180">Haalt het planningsresultaat op en de eerste fouttaak voor de reeks die wordt geïdentificeerd door een specifieke taak.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="ba7ac-181">Valideert de capaciteitsreserveringen voor alle taken die door de engine zijn opgeslagen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="ba7ac-182">Verzendt een tijdstempel naar de engine die is ingesteld voor alle nieuwe capaciteitsreserveringen voor de geplande taken in de cache van de engine.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="ba7ac-183">Voegt een eigenschapsvoorvoegsel toe aan de set eigenschappen die wordt gebruikt wanneer de capaciteit wordt samengevoegd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="ba7ac-184">Voegt een resource toe aan de resourcegroep van de planningsengine.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="ba7ac-185">Voegt een resourcegroep toe aan de resourcegroeppool van de planningsengine.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="ba7ac-186">Voegt een resource als lid toe aan een resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="ba7ac-187">Voegt een doel voor planningsoptimalisatie toe (duur of prioriteit).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="ba7ac-188">Afzonderlijke taken</span><span class="sxs-lookup"><span data-stu-id="ba7ac-188">Individual jobs</span></span>

| <span data-ttu-id="ba7ac-189">**methode**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-189">**Method**</span></span> | <span data-ttu-id="ba7ac-190">**Doel**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="ba7ac-191">Voegt een record met taakgegevens toe die de engine informeert over een taak die moet worden gepland.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="ba7ac-192">Voegt een beperking toe dat een taak op een bepaalde datum en tijd moet worden beëindigd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="ba7ac-193">Voegt een beperking toe dat een taak op een bepaalde datum en tijd moet worden gestart.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="ba7ac-194">Definieert de beperking dat een taak een opgegeven maximumaantal dagen kan beslaan.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="ba7ac-195">Voegt de beperking toe dat de taak moet worden gepland voor een specifieke resource.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="ba7ac-196">Voegt een taakbindingsprioriteit toe voor een (taak, beperkingsniveau)-paar.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="ba7ac-197">Een hogere prioriteit betekent dat de taakvariabelen eerder zijn gebonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="ba7ac-198">De taak wordt verwerkt vóór taken met een lagere prioriteit in dezelfde volgorde.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="ba7ac-199">Voegt informatie over capaciteitsbelasting toe voor een taak (zoals de vereiste uitvoeringstijd voor een taak) die onafhankelijk is van de resource waarop de taak wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="ba7ac-200">Voegt een resource toe aan de reeks resources waarmee de taak wordt uitgevoerd en geeft de vereiste capaciteit aan wanneer deze wordt uitgevoerd op die resource.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="ba7ac-201">Voegt informatie over taakdoelen toe voor een specifiek beperkingsniveau (vroegste eindtijd of laatste begintijd).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="ba7ac-202">Voegt de prioriteit toe die moet worden gebruikt wanneer een taak voor een resource wordt gepland.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="ba7ac-203">Geeft een taaktijd op die afhankelijk is van de resource waarop het project wordt gepland.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="ba7ac-204">Geeft een taaktijd op die onafhankelijk is van de resource waarop het project wordt gepland.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="ba7ac-205">Markeert een taak voor de planning op het niveau van de resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="ba7ac-206">Stelt in of voorrang nemen is toegestaan voor een taak in een resource (als de engine de taak kan plannen in niet-aaneengesloten capaciteitstijdvakken).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="ba7ac-207">Stel het aantal resources in dat nodig is om een taak te plannen (alleen voor de planning van bewerkingen).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="ba7ac-208">Beperkingen tussen taken</span><span class="sxs-lookup"><span data-stu-id="ba7ac-208">Constraints between jobs</span></span>

| <span data-ttu-id="ba7ac-209">**methode**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-209">**Method**</span></span> | <span data-ttu-id="ba7ac-210">**Doel**</span><span class="sxs-lookup"><span data-stu-id="ba7ac-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="ba7ac-211">Voegt een koppeling (zoals einde\>begin) tussen twee taken toe.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="ba7ac-212">Definieert de beperking dat een taak niet kan worden beëindigd voordat een andere taak eindigt en enige vertragingstijd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="ba7ac-213">Voegt een beperking toe dat de capaciteitstijdvakken die zijn gereserveerd voor de taken zich in de kruisende werktijden moeten bevinden voor de twee resources die door de taken worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="ba7ac-214">Voegt een beperking toe waarmee wordt gedefinieerd hoe taken worden geordend wanneer een bepaalde hoeveelheid van een artikel kan worden verplaatst tussen twee resources terwijl de eerste resource nog steeds niet is verwerkt, zodat de tweede resource de verwerking kan starten.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="ba7ac-215">Voegt een beperking toe dat twee taken niet mogen worden gepland voor dezelfde resource.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="ba7ac-216">Voegt een beperking toe dat twee taken moeten worden gepland met dezelfde resource.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="ba7ac-217">Voegt een beperking toe dat een taak moet eindigen met capaciteitsreserveringen voor dezelfde tijdvakken als de primaire taak.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="ba7ac-218">Voegt informatie toe over welke taak de primaire taak is in een set parallelle taken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="ba7ac-219">Oplossing</span><span class="sxs-lookup"><span data-stu-id="ba7ac-219">Solver</span></span>

<span data-ttu-id="ba7ac-220">De engine zelf is in feite een gespecialiseerde beperkingsoplosser waaraan aangepaste heuristiek is toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="ba7ac-221">De oplosser is gebaseerd op twee hoofdelementen: variabelen en beperkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="ba7ac-222">Variabele</span><span class="sxs-lookup"><span data-stu-id="ba7ac-222">Variable</span></span>

<span data-ttu-id="ba7ac-223">Een variabele vertegenwoordigt een domein van mogelijke waarden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="ba7ac-224">Planningsengine heeft twee typen variabelen:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="ba7ac-225">**DateTime-variabele**: heeft een domein van alle datums en tijden en het domein kan worden beperkt door de onder- en bovengrens voor de tijd van de variabele dichter bij elkaar te plaatsen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="ba7ac-226">**Resource-variabele**: heeft een domein van toepasselijke resources en het domein kan worden beperkt door resources uit de lijst te verwijderen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="ba7ac-227">Beperking</span><span class="sxs-lookup"><span data-stu-id="ba7ac-227">Constraint</span></span>

<span data-ttu-id="ba7ac-228">Een beperking werkt op variabelen door de bijbehorende domeinen te beperken, maar is ook afhankelijk van variabelen die worden geactiveerd wanneer de variabelen worden gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="ba7ac-229">Het proces van het 'doorgeven van beperkingen' vindt plaats wanneer een beperking de hoofdfunctie uitvoert en rapporteert aan de hoofdlogica als deze is geslaagd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="ba7ac-230">Een variabele wordt als gebonden beschouwd wanneer deze verder niet kan worden beperkt, wat voor de DateTime-variabele inhoudt dat de boven- en ondergrens hetzelfde is en voor de Resource-variabele dat deze slechts één toepasselijke resource heeft.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="ba7ac-231">Wanneer alle variabelen zijn gekoppeld, wordt er een oplossing gevonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="ba7ac-232">Beperkingsniveaus</span><span class="sxs-lookup"><span data-stu-id="ba7ac-232">Constraint levels</span></span>

<span data-ttu-id="ba7ac-233">Wanneer de planning wordt uitgevoerd als onderdeel van de dekkingsfase van de materiaalbehoefteplanning, worden de orders teruggepland vanaf de behoeftedatum.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="ba7ac-234">Als het echter niet mogelijk is om een planning te vinden die vandaag of later wordt gestart en eindigt voor de behoeftedatum, wordt de planningsrichting gewijzigd in vooruit vanaf vandaag.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="ba7ac-235">Deze hoofdbedrijfsregel wordt verwerkt door de beperkingen in niveaus te ordenen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="ba7ac-236">Als er geen oplossing wordt gevonden bij het gebruik van de beperkingen op het hoogste niveau, worden de beperkingen op dat niveau verwijderd en wordt het lagere niveau geprobeerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="ba7ac-237">In de praktijk betekent dit dat voor achterwaarts plannen het model een niveau 1 bevat met taakdoelen van laatste begintijd en een beperking voor maximale eindtijd (de behoeftedatum) en een niveau 0 met taakdoelen van vroegste eindtijd en een beperking van vandaag voor minimale begintijd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="ba7ac-238">Algoritme</span><span class="sxs-lookup"><span data-stu-id="ba7ac-238">Algorithm</span></span>

<span data-ttu-id="ba7ac-239">De belangrijkste stappen van het algoritme van de engine zijn:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="ba7ac-240">Zoek reeksen (ketens van taak) die afzonderlijk kunnen worden opgelost.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="ba7ac-241">Probeer een eerste oplossing te vinden voor de reeks voor het hoogste beperkingsniveau.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="ba7ac-242">Sorteer de taken in de volgorde op basis van doel en prioriteiten van de taak, zodat een starttaak kan worden gevonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="ba7ac-243">Herhaal de taken in deze volgorde:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="ba7ac-244">Zoek alle beperkingen die moeten worden doorgegeven en voer de doorgifte uit.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="ba7ac-245">Als alle variabelen voor de taak zijn gebonden, is er een oplossing voor die taak gevonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="ba7ac-246">Als een van de variabelen niet kan worden gebonden zonder de beperkingen te schenden, kunt u de binding van de variabele terugdraaien, een andere waarde proberen in het domein (voor resource-variabele) en de doorgifte van beperkingen opnieuw uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="ba7ac-247">Als er geen oplossing is gevonden, worden alle beperkingen op het huidige beperkingsniveau verwijderd, wordt het niveau lager (als er lagere niveaus beschikbaar zijn) en wordt er met de nieuwe beperking geprobeerd een oplossing te zoeken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="ba7ac-248">Als er een bruikbare oplossing is gevonden, wordt de optimaliseringsfase gestart. Hierbij wordt geprobeerd een betere oplossing te vinden totdat de time-out voor optimalisatie is bereikt of alle resourcecombinaties zijn uitgeput.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="ba7ac-249">De beperkingsoplossing is niet bekend met de specifieke planningsalgoritmen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="ba7ac-250">De 'magie' vindt plaats bij de definitie en combinatie van de verschillende beperkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="ba7ac-251">Werktijden bepalen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-251">Determining working times</span></span>

<span data-ttu-id="ba7ac-252">Een groot deel van de (interne) beperkingen in de engine bepaalt de werktijd en capaciteit van een resource.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="ba7ac-253">De taak is in wezen het laten doorlopen van de werktijden voor een resource vanaf een bepaald punt in een bepaalde richting en het zoeken van een interval waarin de vereiste capaciteit (tijd) voor de taken kan passen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="ba7ac-254">Hiervoor moet de engine de werktijden van een resource kennen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="ba7ac-255">In tegenstelling tot de gegevens van het hoofdmodel ziijn de werktijden *lazy loaded*, wat betekent dat ze naar behoefte in de engine worden geladen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-255">Opposite to the main model data, the working times are *lazy loaded*, meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="ba7ac-256">De reden hiervoor is dat een kalender in Supply Chain Management vaak werktijden voor een zeer lange tijd bevat en dat er meestal veel kalenders zijn, zodat de hoeveelheid gegevens te groot zou zijn om vooraf te worden geladen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="ba7ac-257">Kalendergegevens worden door de engine in segmenten aangevraagd door de X++-klassemethode `WrkCtrSchedulingInteropDataProvider.getWorkingTimes` aan te roepen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="ba7ac-258">De aanvraag is voor een specifieke kalender-id binnen een bepaald tijdsinterval.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="ba7ac-259">Afhankelijk van de status van de servercache in Supply Chain Management, kan elk van deze aanvragen een aantal databaseaanroepen opleveren, wat veel tijd in beslag neemt (vergeleken met de zuivere rekentijd).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="ba7ac-260">Als de kalender zeer complexe werktijddefinities bevat met veel werktijdintervallen per dag, duurt het laden nog langer.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="ba7ac-261">Wanneer de werktijdgegevens in de planningsengine worden geladen, worden deze in de interne cache voor de specifieke kalender bewaard, wat betekent dat als er andere taken of resources in dezelfde kalender worden gebruikt, de volgende zoekopdrachten snel vanuit het geheugen kunnen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="ba7ac-262">Een veelvoorkomende oorzaak van slechte prestaties is het feit dat er voor elke resource een afzonderlijke kalender-id wordt gebruikt, omdat er vervolgens gegevens moeten worden aangevraagd voor elke kalender, zelfs als de inhoud van de kalenders hetzelfde kan zijn.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="ba7ac-263">Eindige capaciteit</span><span class="sxs-lookup"><span data-stu-id="ba7ac-263">Finite capacity</span></span>

<span data-ttu-id="ba7ac-264">Wanneer u eindige capaciteit gebruikt, worden de werktijdvakken uit de kalender gesplitst en verminderd op basis van de bestaande capaciteitsreserveringen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="ba7ac-265">Deze reserveringen worden ook met dezelfde `WrkCtrSchedulingInteropDataProvider`-klasse opgehaald als de kalenders, maar gebruiken in plaats daarvan de `getCapacityReservations`-methode.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="ba7ac-266">Bij het plannen tijdens de hoofdplanning wordt rekening gehouden met de reserveringen voor het specifieke hoofdplan en als deze zijn ingeschakeld op de pagina **Parameters hoofdplanning**, worden de reserveringen van gefiatteerde productieorders eveneens opgenomen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="ba7ac-267">Bij het plannen van een productieorder is het ook een optie om reserveringen van bestaande geplande orders op te nemen, hoewel dit niet zo gebruikelijk is als de andere methode.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="ba7ac-268">Door het gebruik van eindige capaciteit zal de planning om een aantal redenen langer duren:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="ba7ac-269">Het ophalen van de capaciteitsgegevens uit de database is een trage bewerking en het opslaan in de cache van capaciteitsgegevens op de server is meestal niet zo goed als voor werktijden omdat deze niet worden gedeeld door resources zoals kalenders.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="ba7ac-270">Het aantal werktijdvakken dat moet worden doorlopen neemt toe vanwege opssplitsingen en tijdvakken voor een langere periode moeten doorgaans worden onderzocht voordat een oplossing kan worden gevonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="ba7ac-271">Nadat de planning is voltooid, moet er een controle op conflicterende reserveringen worden uitgevoerd (zie de sectie 'Gelijktijdige uitvoering van meerdere planningsengines' voor meer informatie).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="ba7ac-272">De resourcecombinaties onderzoeken</span><span class="sxs-lookup"><span data-stu-id="ba7ac-272">Examining the resource combinations</span></span>

<span data-ttu-id="ba7ac-273">Als de takenreeks alleen de standaard `FinishStart`-koppelingen bevat, zodat deze een eenvoudige keten zonder vertakkingen vormt, kunt u een optimaal resultaat (gezien vanuit de enkele order, niet over orders heen) bereiken met behulp van de beste oplossing voor de eerste taak en vervolgens naar de beste oplossing voor de volgende taak gaan.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="ba7ac-274">De beste oplossing voor een taak betekent het zoeken van de resource die de begin- en einddatum kan halen van de taak die het dichtst bij het taakdoel ligt (bij voorwaarts plannen betekent dit dat de einddatum van de taak zo vroeg mogelijk ligt) terwijl de beperkingen nog steeds worden gerespecteerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="ba7ac-275">Wanneer er parallelle taken zijn, kan het zoeken naar een oplossing betrekking hebben op het onderzoeken van verschillende combinaties van resources.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="ba7ac-276">Het aantal mogelijke resourcecombinaties is het product van het aantal toepasselijke resources voor de verbonden parallelle taken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="ba7ac-277">Met name wanneer een order terug wordt gepland vanaf een behoeftedatum, kan het een tijdje duren om te realiseren dat er geen oplossing voor het probleem is, waardoor de parallelle taken vóór de datum van vandaag zullen worden uitgevoerd, aangezien alle combinaties moeten worden gecontroleerd, omdat er mogelijk bepaalde resources zijn met een hogere efficiëntie of een andere kalender die een resultaat kan opleveren.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="ba7ac-278">Dit betekent dat als er geen time-outlimiet is ingesteld, de uitvoering lange tijd doorgaat voordat de richting in voorwaarts wordt gewijzigd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="ba7ac-279">Deze combinatorische logica betekent ook dat het toevoegen van meer toepasselijke resources tot een tragere uitvoering van de engine kan leiden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="ba7ac-280">Als er prestatieproblemen optreden wanneer er parallelle bewerkingen en een oneindige capaciteit worden gepland, kan deze gedeeltelijk worden bepaald door de routeontwerper een beslissing te laten nemen over welke resource moet worden gebruikt en vervolgens de resource rechtstreeks aan de bewerking toe te wijzen (omdat de engine in de meeste gevallen altijd dezelfde resource ophaalt en het eindresultaat dus hetzelfde blijft).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="ba7ac-281">Harde koppelingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-281">Hard links</span></span>

<span data-ttu-id="ba7ac-282">Als u het koppelingstype tussen twee taken instelt op hard, zorgt u ervoor dat er geen tijdshiaat bestaat tussen het einde van de ene taak en het begin van de volgende.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="ba7ac-283">Dit kan erg handig zijn in scenario's als wanneer metaal wordt verhit in de ene taak en vervolgens verwerkt in de volgende taak, waarbij het niet wenselijk is om het metaal tussendoor te laten afkoelen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="ba7ac-284">Met standaard zachte koppelingen en voorwaartse planningen kan, als de route een eenvoudige keten zonder vertakkingen is, een oplossing worden bereikt door een oplossing te vinden voor de eerste taak die aan zijn eigen beperkingen voldoet en vervolgens door de keten wordt verplaatst waarbij de eindtijd van de vorige taak wordt doorgegeven aan de volgende taak.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="ba7ac-285">Als de huidige taak geen capaciteit kan vinden, wordt de begintijd voor deze taak verder verplaatst zonder dat er een leemte bestaat tussen de taken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="ba7ac-286">Met harde koppelingen (met name met betrekking tot eindige capaciteit) voor hetzelfde scenario, betekent het feit dat een taak de capaciteit verderop in de keten niet kan vinden, dat alle eerder geplande taken één voor één moeten worden 'meegesleept' en dus een aantal keren opnieuw worden gepland.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="ba7ac-287">Met name in scenario's met een hoge belasting voor meerdere resources kunnen de harde koppelingen een kettingreactie veroorzaken waarbij de taken elkaar beïnvloeden en er een aantal iteraties moet worden uitgevoerd voordat het resultaat zich stabiliseert in een haalbaar schema.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="ba7ac-288">Gelijktijdige uitvoering van planningsengines</span><span class="sxs-lookup"><span data-stu-id="ba7ac-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="ba7ac-289">Bij het uitvoeren van een planning als onderdeel van een hoofdplanning waarin helpers worden gebruikt, kan elk van de helper-threads voor de hoofdplanning ook activiteiten voor de planning van productieorders ophalen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="ba7ac-290">Dit houdt in dat meerdere planningsengines tegelijkertijd kunnen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="ba7ac-291">Hoewel multithreading in het algemeen een zeer belangrijk prestatievoordeel is, zijn er ook enkele functionele nadelen wat betreft planning.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="ba7ac-292">In MRP worden alle productieorders voor een bepaald stuklijstniveau gepland in de behoeftedatumreeks, wat betekent dat de orders met de vroegste behoeftedatum eerst moeten worden gepland waardoor de beschikbare resourcecapaciteit zo hoog mogelijk wordt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="ba7ac-293">Wanneer meerdere engines gebruikmaken van de lijst met ongeplande orders, is de reeks echter niet lanager gegarandeerd, aangezien de ene engine mogelijk sneller gereed is dan een andere.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="ba7ac-294">Bovendien kan een race condition optreden bij het plannen met behulp van eindige capaciteit en wanneer meerdere engine-exemplaren proberen om orders te plannen die mogelijk gebruikmaken van dezelfde resources in hetzelfde tijdsinterval.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="ba7ac-295">Het aantal van dergelijke race condities wordt vastgelegd in het veld **Planningsconflicten** op de geschiedenispagina van de hoofdplanning.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="ba7ac-296">De logica voor het oplossen van conflicten is als volgt:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="ba7ac-297">Plan een order (zonder vergrendeling) en haal capaciteitsreserveringen op.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="ba7ac-298">Neem de vergrendeling.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-298">Take the lock.</span></span>
- <span data-ttu-id="ba7ac-299">Controleer of er nieuwere capaciteitsreserveringen bestaan voor de geplande resources in het tijdsbestek.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="ba7ac-300">Als dat niet zo is, schrijft u de capaciteit en heft u de vergrendeling op.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="ba7ac-301">Zo ja, dan heft u de vergrendeling op en plant u de order opnieuw vanaf het begin.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="ba7ac-302">Bij het plannen van meerdere engine-exemplaren is het resultaat dus niet volledig deterministisch, omdat het afhankelijk is van de exacte timing van elk van de threads.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="ba7ac-303">Prestaties van bewerkingsplanning</span><span class="sxs-lookup"><span data-stu-id="ba7ac-303">Operation scheduling performance</span></span>

<span data-ttu-id="ba7ac-304">Hoewel de bewerkingsplanning ook wel eens capaciteitsplanning wordt genoemd, gezien uit het oogpunt van de engine, kan het moeilijker zijn om een oplossing te vinden als er beperkte capaciteit wordt gebruikt, aangezien er meer gegevens nodig zijn om de haalbaarheid te bepalen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="ba7ac-305">De capaciteit van een resourcegroep is afhankelijk van welke en hoeveel resources lid zijn van de resourcegroep.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="ba7ac-306">Een resourcegroep op zichzelf heeft geen capaciteit. Alleen als resources lid zijn van de groep hebben zij capaciteit.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="ba7ac-307">Omdat het lidmaatschap van de resourcegroep kan variëren per periode, moet de capaciteit per dag worden geëvalueerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="ba7ac-308">Bij de bewerkingsplanning wordt de kalender van de resourcegroep gebruikt om de begin- en eindtijd voor elke bewerking te bepalen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="ba7ac-309">Dit houdt in dat in de kalender van de resourcegroep een limiet wordt ingesteld voor de hoeveelheid tijd waarvoor bewerkingsplanning voor één bewerking op één dag in één resourcegroep kan worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="ba7ac-310">In tegenstelling tot bij de kalender voor de specifieke resources worden de efficiëntiegegevens van de kalender genegeerd voor de resourcegroep, aangezien hiervoor simpelweg openingstijden en geen werkelijke capaciteit worden aangegeven.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="ba7ac-311">Als de werktijd voor een resourcegroep op een bepaalde datum bijvoorbeeld van 8:00 tot 16:00 bedraagt, kan een bewerking de resourcegroep niet verder belasten dan past in 8 uur, ongeacht de hoeveelheid capaciteit van de resourcegroep op die dag.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="ba7ac-312">De beschikbare capaciteit kan de belasting echter verder beperken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="ba7ac-313">De belasting van de taakplanning voor alle resources die zijn opgenomen in de resourcegroep op een bepaalde dag wordt meegenomen bij het berekenen van de beschikbare capaciteit voor de resourcegroep op dezelfde dag.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="ba7ac-314">Voor elke datum is de berekening:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-314">For each date, the calculation is:</span></span>

> <span data-ttu-id="ba7ac-315">Beschikbare capaciteit resourcegroep =</span><span class="sxs-lookup"><span data-stu-id="ba7ac-315">Available resource group capacity =</span></span>  
> <span data-ttu-id="ba7ac-316">(capaciteit voor resources in de groep op basis van hun kalender) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-316">(capacity for resources in the group based on their calendar) -</span></span>  
> <span data-ttu-id="ba7ac-317">(geplande belasting van taak voor de resources in de groep) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-317">(job scheduled load on the resources in the group) -</span></span>  
> <span data-ttu-id="ba7ac-318">(geplande belasting van bewerkingen voor de resources in de groep) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-318">(operations scheduled load on the resources in the group) -</span></span>  
> <span data-ttu-id="ba7ac-319">(geplande belasting van bewerkingen voor de resourcegroep)</span><span class="sxs-lookup"><span data-stu-id="ba7ac-319">(operations scheduled load on the resource group)</span></span>

<span data-ttu-id="ba7ac-320">Op het tabblad **Resourcevereisten** van de routebewerking kunt u de resourcebehoeften opgeven met behulp van een specifieke resource (in welk geval de bewerking wordt gepland met behulp van die resource), voor een resourcegroep, voor een resourcetype of voor een of meer capaciteiten, kwalificaties, cursussen of certificaten.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-320">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="ba7ac-321">Wanneer u al deze opties gebruikt, kunt u het routeontwerp op een flexibele manier plannen, maar de planning voor de engine wordt hierdoor ook bemoeilijkt, omdat de capaciteit moet worden berekend per 'eigenschap' (de abstracte naam die in de-engine wordt gebruikt voor capaciteit, vaardigheden enzovoort).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-321">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="ba7ac-322">De capaciteit van de resourcegroep voor een capaciteit is de som van de capaciteit voor alle resources in de resourcegroep die de desbetreffende mogelijkheid heeft.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-322">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="ba7ac-323">Als een resource in de groep een mogelijkheid heeft, wordt deze in overweging genomen, ongeacht het vereiste niveau van de capaciteit.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-323">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="ba7ac-324">Bij de bewerkingsplanning wordt de beschikbare capaciteit voor een bepaalde capaciteit voor een resourcegroep verlaagd wanneer deze wordt geladen met een bewerking waarvoor de desbetreffende functie vereist is.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-324">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="ba7ac-325">Als voor de bewerking meer dan één mogelijkheid is vereist, wordt de capaciteit voor alle vereiste capaciteiten verlaagd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-325">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="ba7ac-326">Voor elke datum is de vereiste berekening:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-326">For each date, the required calculation is:</span></span>

> <span data-ttu-id="ba7ac-327">De beschikbare capaciteit voor een mogelijkheid =</span><span class="sxs-lookup"><span data-stu-id="ba7ac-327">The available capacity for a capability =</span></span>  
> <span data-ttu-id="ba7ac-328">(de capaciteit voor de mogelijkheid) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-328">(the capacity for the capability) -</span></span>  
> <span data-ttu-id="ba7ac-329">(voor de taak geplande belasting van de resources met de specifieke mogelijkheid, opgenomen in de resource groep) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-329">(job scheduled load on the resources with the specific capability, included in the resource group) -</span></span>  
> <span data-ttu-id="ba7ac-330">(voor de bewerkingen geplande belasting van de resources met de specifieke mogelijkheid, opgenomen in de resource groep) -</span><span class="sxs-lookup"><span data-stu-id="ba7ac-330">(operations scheduled load on the resources with the specific capability, included in the resource group) -</span></span>  
> <span data-ttu-id="ba7ac-331">(voor de bewerkingen geplande belasting van de resourcegroep zelf die de specifieke mogelijkheid vereisen)</span><span class="sxs-lookup"><span data-stu-id="ba7ac-331">(operations scheduled load on the resource group itself that require the specific capability)</span></span>

<span data-ttu-id="ba7ac-332">Dit houdt in dat als er wordt geladen voor een specifieke resource, de belasting wordt meegenomen bij de berekening van de beschikbare capaciteit van de resourcegroep per mogelijkheid, omdat de belasting van een specifieke resource de bijdrage van de resourcegroep verlaagt voor een mogelijkheid, ongeacht of de belasting voor de specifieke resource voor die specifieke mogelijkheid geldt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-332">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="ba7ac-333">Als er wordt geladen op het niveau van de resourcegroep, wordt deze alleen in de berekening van de beschikbare capaciteit van de resourcegroep per mogelijkheid beschouwd als de werklast afkomstig is van een bewerking waarvoor de specifieke mogelijkheid vereist is.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-333">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="ba7ac-334">De bovenstaande logica is ingewikkeld, aangezien dit voor elk type 'eigenschap' hetzelfde is, zodat er voor het gebruik van bewerkingsplanning met beperkte capaciteit een aanzienlijke hoeveelheid gegevens moet worden geladen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-334">The above logic is complicatd, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="ba7ac-335">Invoer en uitvoer van planningsengine weergeven</span><span class="sxs-lookup"><span data-stu-id="ba7ac-335">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="ba7ac-336">Als u specifieke informatie over de invoer en uitvoer van het planningsproces wilt weergeven, schakelt u logboekregistratie in door naar **Organisatiebeheer \> Instellen \> Planning \> Traceringscockpit plannen** te gaan.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-336">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="ba7ac-337">Selecteer op deze pagina de optie **Logboekregistratie inschakelen** in het actievenster.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-337">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="ba7ac-338">Voer vervolgens de planning voor de productieorder uit.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-338">Then run the scheduling for the production order.</span></span> <span data-ttu-id="ba7ac-339">Keert, wanneer u klaar bent, terug naar de pagina **Traceringscockpit plannen** en selecteer **Logboekregistratie uitschakelen** in het actievenster.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-339">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="ba7ac-340">Vernieuw de pagina. Er wordt nu een een nieuwe regel weergegeven in het raster.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-340">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="ba7ac-341">Selecteer de nieuwe regel en selecteer **Downloaden** in het actievenster.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-341">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="ba7ac-342">Hierdoor krijgt u een gecomprimeerde ZIP-map met de volgende bestanden:</span><span class="sxs-lookup"><span data-stu-id="ba7ac-342">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="ba7ac-343">**Log. txt**: dit is het logboekbestand waarin de stappen worden beschreven die de engine doorloopt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-343">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="ba7ac-344">Het is zeer uitgebreid en kan een beetje overweldigend zijn, maar wanneer dit wordt gebruikt als onderdeel van het experimenteren met de route-instelling om prestatieproblemen op te lossen, is het eerste wat er moet worden gezocht, het verschil in de tijd tussen de eerste en de laatste regel, omdat u hierdoor precies kunt bepalen hoe lang de planner heeft gewerkt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-344">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="ba7ac-345">**XmlModel.xml**: dit bevat het model dat is ingebouwd in X++ en waarop de engine actief is.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-345">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="ba7ac-346">De `JobId` die wordt gebruikt in het bestand komt overeen met de `RecId`-brontabel met de taken (`ReqRouteJob` of `ProdRouteJob`).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-346">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="ba7ac-347">Waar u standaard naar kunt kijken in dit bestand is of de datums die zijn opgegeven in `ConstraintJobStartsAt` en `ConstraintJobEndsAt` zoals verwacht zijn, dat de `JobGoal`-eigenschap juist is ingesteld en dat de taken aan elkaar zijn gerelateerd via de `JobLink`-beperkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-347">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="ba7ac-348">**XmlSlots.xml**: dit bevat alle werktijden en capaciteitsreserveringen die de engine heeft aangevraagd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-348">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="ba7ac-349">De werktijden en reserveringen van de kalender worden alleen aangevraagd door de engine voor de tijdsperioden waarin deze de taken (en een extra buffer) probeert te plaatsen, dus als het bestand tijden ver in de toekomst bevat, kan dit een indicatie zijn van een probleem met de instelling.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-349">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="ba7ac-350">In de `ResourceProperty`-knooppunten wordt voor elke resource aangegeven aan welke resourcegroep en -capaciteiten ze zijn gekoppeld gedurende welke perioden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-350">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="ba7ac-351">**Result.xml**: dit bevat het resultaat van de planningsuitvoering.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-351">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="ba7ac-352">De traceringsfunctionaliteit kan aanzienlijke prestatieoverhead toevoegen, dus gebruik deze functie alleen op een gecontroleerde manier voor het onderzoeken van de planning van specifieke orders.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-352">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="ba7ac-353">Als deze tijdens een hoofdplanning wordt ingeschakeld, wordt snel de maximale grootte bereikt en wordt gestopt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-353">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="ba7ac-354">Problemen met prestaties oplossen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-354">Troubleshooting performance</span></span>

<span data-ttu-id="ba7ac-355">Zoals kan worden geïnterpreteerd uit alle voorgaande secties, zijn er enkele valkuilen die betrekking hebben op de instelling en het gebruik van de planningsengine. Deze kunnen leiden tot prestatieproblemen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-355">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="ba7ac-356">U kunt de volgende checklijst gebruiken om dergelijke problemen op te lossen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-356">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="ba7ac-357">Het is belangrijk om alle punten te bekijken, zoals het vaakst een combinatie is van meerdere factoren die leiden tot problemen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-357">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="ba7ac-358">Een planning uitvoeren als onderdeel van MRP wanneer dit niet nodig is</span><span class="sxs-lookup"><span data-stu-id="ba7ac-358">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="ba7ac-359">Hoewel routes worden gebruikt voor de productiecontrole, zoals kostprijsberekening en rapportage, is het wellicht niet nodig om deze te overwegen tijdens MRP.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-359">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="ba7ac-360">In sommige gevallen is het opgeven van een standaard doorlooptijd van de productie voor het artikel voldoende voor de planning.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-360">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="ba7ac-361">Als u de routeplanning wilt uitschakelen, stelt u de time fence voor capaciteit in op nul.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-361">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="ba7ac-362">Als de planning moet worden uitgevoerd, moet de time fence van de capaciteit nauwkeurig worden ingesteld omdat het mogelijk niet nodig is om routes te overwegen voor de volledige omvang van de time fence voor behoefteplanning van de MRP.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-362">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="ba7ac-363">Als de order niet is gepland tijdens MRP, moet deze in plaats daarvan worden ingepland wanneer de geplande order wordt gefiatteerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-363">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="ba7ac-364">Dit houdt in dat het proces langer duurt, dus afhankelijk van het aantal voorgestelde geplande orders dat gefiatteerd wordt gaat de prestatiewinst tijdens MRP mogelijk verloren bij het fiatteren.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-364">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="ba7ac-365">Route met onnodige bewerkingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-365">Route with unnecessary operations</span></span>

<span data-ttu-id="ba7ac-366">Bij het ontwerpen van de route bestaat de neiging om de echte wereld precies te modelleren met alle stappen die de productie doorloopt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-366">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="ba7ac-367">Hoewel dit in sommige gevallen handig kan zijn, is het niet goed voor de prestaties als het model dat de engine nodig heeft om te werken, groter is (zowel wat betreft taken als beperkingen) en er meer SQL-instructies worden uitgevoerd voor het invoegen en bijwerken van de taken en capaciteitsreserveringen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-367">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="ba7ac-368">Bovendien is er een downstream-effect dat de voortgang van de taken uiteindelijk moet rapporteren, wat kan worden verminderd met automatische boekingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-368">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="ba7ac-369">Als de gegevens niet worden gebruikt, zorgt dit voor onnodige belasting.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-369">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="ba7ac-370">We raden u aan alleen bewerkingen te maken die strikt nodig zijn voor de planning (dit zijn doorgaans de bottleneck resources) en/of kostprijsberekening.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-370">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="ba7ac-371">U kunt een groot aantal kleinere afzonderlijke bewerkingen ook groeperen in één grotere bewerking die een groter deel van het proces vertegenwoordigt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-371">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="ba7ac-372">Veel van toepassing zijnde resources voor een bewerking</span><span class="sxs-lookup"><span data-stu-id="ba7ac-372">Many applicable resources for an operation</span></span>

<span data-ttu-id="ba7ac-373">Het aantal toepasselijke resources voor een bewerking wordt bepaald door de resourcevereisten die zijn ingesteld op de bewerkingsrelatie.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-373">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="ba7ac-374">De behoefte kan gelden voor een specifieke (individuele) resource of zijn gebaseerd op het lidmaatschap van de resource van een resourcegroep of mogelijkheid.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-374">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="ba7ac-375">Als er geen planning wordt uitgevoerd met behulp van eindige capaciteit en alle toepasselijke resources dezelfde kalender en efficiëntie hebben, wordt er door de planningsengine altijd dezelfde resource verzameld voor een bewerking, maar pas nadat alle toepasselijke resources zijn uitgeprobeerd om te controleren of er een 'betere' is dan de andere resources.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-375">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="ba7ac-376">In dat geval kan de belasting van de planning eenvoudig worden verminderd door altijd een specifieke resource aan de bewerking toe te wijzen op de route-ontwerptijd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-376">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="ba7ac-377">Route met parallelle bewerkingen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-377">Route with parallel operations</span></span>

<span data-ttu-id="ba7ac-378">Hoewel parallelle bewerkingen (primair/secundair) een krachtig hulpmiddel zijn om scenario's te maken zoals wanneer een machine en een operator beide nodig zijn om een bepaalde taak uit te voeren, is dit ook de bron van een groot aantal prestatieproblemen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-378">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="ba7ac-379">Als een behoefte aan een bepaalde afzonderlijke resource is toegewezen aan de primaire en secundaire bewerking, is dit doorgaans geen probleem.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-379">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="ba7ac-380">Als er echter veel mogelijke resources zijn voor elk van de bewerkingen, voegt deze een aanzienlijke berekeningscomplexiteit toe aan de planning.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-380">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="ba7ac-381">Een alternatief voor het gebruik van parallelle bewerkingen is om de paren als 'virtuele' resources (die het team weergeven dat altijd samen voor de bewerking komt) te modelleren of om een van de bewerkingen alleen te modelleren als deze geen bottleneck vormt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-381">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="ba7ac-382">Route met hoeveelheid resources van meer dan 1</span><span class="sxs-lookup"><span data-stu-id="ba7ac-382">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="ba7ac-383">Als de hoeveelheid resources die nodig zijn voor een hogere bewerking wordt ingesteld op meer dan één, resulteert deze in effectief dezelfde manier als bij het gebruik van primaire/secundaire bewerkingen, omdat er meerdere parallelle taken naar de engine worden verzonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-383">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="ba7ac-384">Voor dit geval is er echter geen optie voor het gebruik van specifieke resourcetoewijzingen, omdat voor een hoeveelheid die groter is dan één resource, meer dan één resource van toepassing is voor de bewerking.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-384">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="ba7ac-385">Buitensporig gebruik van eindige capaciteit</span><span class="sxs-lookup"><span data-stu-id="ba7ac-385">Excessive use of finite capacity</span></span>

<span data-ttu-id="ba7ac-386">Het gebruik van eindige capaciteit vereist dat de engine de capaciteitsgegevens uit een database laadt en een berekeningsoverhead kan hebben omdat het moeilijker is om een oplossing te vinden vooral in omgevingen waarin de resources worden geboekt met de maximale capaciteit.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-386">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="ba7ac-387">Daarom is het belangrijk om nauwkeurig te beoordelen of een bron echt een eindige capaciteit nodig heeft of dat deze daadwerkelijk kan worden geboekt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-387">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="ba7ac-388">Omdat er mogelijk verschil is tussen resources met een beperkte capaciteit en belangrijk dat deze niet overboekt zijn, kunt u het beste de bottleneck-optie voor een resource gebruiken in combinatie met een aparte waarde voor het plan in 'Time fence capaciteit voor bottleneck resources'.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-388">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="ba7ac-389">Met het bottleneck-concept kan de time fence van de algemene eindige capaciteit worden verlaagd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-389">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="ba7ac-390">Harde koppelingen instellen</span><span class="sxs-lookup"><span data-stu-id="ba7ac-390">Setting hard links</span></span>

<span data-ttu-id="ba7ac-391">Het standaardkoppelingstype van de route is *zacht*, wat betekent dat een tijdshiaat is toegestaan tussen de eindtijd van de ene bewerking en het begin van de volgende.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-391">The standard link type of the route is *soft*, which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="ba7ac-392">Dit kan een vervelend effect hebben dat, als materialen of capaciteit niet erg lang beschikbaar zijn voor een van de bewerkingen, de productie mogelijk een behoorlijke tijd inactief kan zijn, waardoor de hoeveelheid onderhanden werk toeneemt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-392">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="ba7ac-393">Dit gebeurt niet met harde koppelingen, omdat het einde en begin perfect moeten zijn afgestemd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-393">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="ba7ac-394">Als u echter harde koppelingen instelt, is het planningsprobleem lastiger omdat de kruisingen voor werktijden en capaciteit moeten worden berekend voor de twee resources van de bewerkingen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-394">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="ba7ac-395">Als er ook parallelle bewerkingen zijn, wordt er een aanzienlijke tijd toegevoegd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-395">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="ba7ac-396">Als de resources van de twee bewerkingen verschillende kalenders hebben die helemaal niet overlappen, is het probleem onoplosbaar.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-396">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="ba7ac-397">Het is raadzaam om harde koppelingen alleen te gebruiken wanneer dat strikt noodzakelijk is en zorgvuldig te bedenken of het nodig is voor elke bewerking van de route.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-397">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="ba7ac-398">Om het werk in uitvoering te verminderen zonder harde koppelingen toe te passen, is het een truc om de order tweemaal te plannen met een wijziging in de tegenovergestelde richting voor de tweede fase.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-398">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="ba7ac-399">Als de eerste planning terugwaarts is uitgevoerd vanaf de leveringsdatum, moet de tweede voorwaarts worden uitgevoerd vanaf de geplande begindatum.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-399">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="ba7ac-400">Hierdoor worden de taken zo veel mogelijk gecomprimeerd, zodat het onderhanden werk wordt geminimaliseerd.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-400">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="ba7ac-401">Afzonderlijke kalender voor elke resource</span><span class="sxs-lookup"><span data-stu-id="ba7ac-401">Separate calendar for each resource</span></span>

<span data-ttu-id="ba7ac-402">Een van de belangrijkste gegevensbronnen voor de planningsengine zijn kalendergegevens. Het laden hiervan vanuit de database kan duur zijn.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-402">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="ba7ac-403">Omdat kalenders worden gegenereerd op basis van sjablonen, zou het verleidelijk zijn om een kalender te genereren voor elke resource en vervolgens de informatie in deze kalender aan te passen wanneer de resource downtime en andere problemen heeft.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-403">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="ba7ac-404">Hierdoor wordt de mogelijkheid van de engine om kalendergegevens in de cache op te slaan echter ernstig beperkt, omdat het daarom nodig is om voor elke bron nieuwe gegevens aan te vragen. Dit kan tot ernstige prestatieproblemen leiden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-404">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="ba7ac-405">In plaats daarvan kunt u het beste de kalenders zo veel mogelijk opnieuw gebruiken tussen de resources en vervolgens downtimewijzigingen regelen door een andere kalender-id voor een periode toe te wijzen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-405">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="ba7ac-406">Groot aantal werktijdvakken per kalenderdag</span><span class="sxs-lookup"><span data-stu-id="ba7ac-406">High number of working time slots per calendar day</span></span>

<span data-ttu-id="ba7ac-407">Omdat de engine werkt door tijdvakken één voor één te onderzoeken op capaciteit, is het handig om het aantal tijdvakken per kalenderdag te beperken.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-407">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="ba7ac-408">U kunt dit bijvoorbeeld doen door rekening te houden met het feit of het volgens de planning belangrijk is dat werknemers elk uur een pauze van 5 minuten nemen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-408">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="ba7ac-409">Grote (of geen) planningstime-outs</span><span class="sxs-lookup"><span data-stu-id="ba7ac-409">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="ba7ac-410">U kunt de prestaties van de planningsengine optimaliseren met behulp van parameters op de pagina **Planningsparameters**.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-410">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="ba7ac-411">De instellingen **Planningstime-out ingeschakeld** en **Planningsoptimalisatie ingeschakeld** moeten altijd zijn ingesteld op **Ja**.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-411">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="ba7ac-412">Als de waarde is ingesteld op **Nee**, kan de planning mogelijk oneindig worden uitgevoerd als er een niet-bruikbare route met veel opties is gemaakt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-412">If set to **No**, the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="ba7ac-413">De waarde voor **Maximale planningstijd per reeks** bepaalt hoeveel seconden kunnen worden besteed aan het zoeken naar een oplossing voor één reeks (in de meeste gevallen komt een reeks overeen met een enkele order).</span><span class="sxs-lookup"><span data-stu-id="ba7ac-413">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="ba7ac-414">De waarde die u hier kunt gebruiken, is afhankelijk van de complexiteit van de route en de instellingen, zoals een eindige capaciteit, maar ongeveer 30 seconden is een goed uitgangspunt.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-414">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="ba7ac-415">De waarde voor **Time-out optimalisatiepogingen** bepaalt hoeveel seconden maximaal kunnen worden gebruikt om een betere oplossing te vinden dan de versie die oorspronkelijk is gevonden.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-415">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="ba7ac-416">Dit heeft alleen invloed op routes die parallelle bewerkingen gebruiken, aangezien deze moeten worden gebruikt om verschillende combinaties te testen.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-416">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="ba7ac-417">De waarden die voor de time-outs zijn ingesteld, worden toegepast voor het plannen van vrijgegeven productieorders en van geplande orders als onderdeel van MRP.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-417">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="ba7ac-418">Hierdoor kan het instellen van zeer hoge waarden leiden tot een aanzienlijke toename van de uitvoeringstijd van MRP wanneer deze wordt uitgevoerd voor een plan met veel geplande productieorders.</span><span class="sxs-lookup"><span data-stu-id="ba7ac-418">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>

---
title: De optimale combinatie van overlappende kortingen bepalen
description: Als kortingen elkaar overlappen, moet u bepalen welke combinatie van overlappende kortingen die in het totaal van de laagste transactie resulteert of de hoogste totale korting. Wanneer het kortingsbedrag dat is afhankelijk van de prijs van de producten die zijn aangeschaft, zoals in het gemeenschappelijk &quot;koop 1, 1 X procent Ontvang korting op&quot; detailhandelkorting (BOGO), dit proces wordt een probleem van de gecombineerde optimalisatie.
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>De optimale combinatie van overlappende kortingen bepalen

Als kortingen elkaar overlappen, moet u bepalen welke combinatie van overlappende kortingen die in het totaal van de laagste transactie resulteert of de hoogste totale korting. Wanneer het kortingsbedrag dat is afhankelijk van de prijs van de producten die zijn aangeschaft, zoals in het gemeenschappelijk 'koop 1, 1 X procent Ontvang korting op' detailhandelkorting (BOGO), dit proces wordt een probleem van de gecombineerde optimalisatie.

In dit artikel geldt voor Microsoft Dynamics AX 2012 R3 met KB 3105973 (uitgebracht op 2 November 2015) of hoger,.Net als de februari 2016 vrijgeven van Microsoft Dynamics AX. Om te bepalen van de overlappende kortingen combinatie wilt toepassen op tijd en blijft de uitgebreide kortingsprogramma functionaliteit die beschikbaar is in Microsoft Dynamics AX for Retail bieden, hebben we een methode voor het toepassen van overlappende kortingen ingevoerd. We noemen deze nieuwe methode **marginale waarde classificatie**. Classificatie marginale waarde wordt gebruikt wanneer de tijd die nodig is om te beoordelen van mogelijke combinaties van overlappende kortingen hoger is dan een drempel die kan worden geconfigureerd op de **parameters detailhandel** pagina in Dynamics AX. In de marginale waarde rangschikking methode, wordt een waarde berekend voor elke overlappende korting met behulp van de waarde van de korting op de gedeelde producten. De overlappende kortingen aan de laagste waarde van de relatieve vervolgens toegepast vanaf de hoogste relatieve waarde. Zie de sectie 'Marginale waarde' verderop in dit artikel voor meer informatie over de nieuwe methode. Marginale waarde classificatie wordt niet gebruikt wanneer de kortingsbedragen voor een product niet worden beïnvloed door een ander product in de transactie. Deze methode niet wordt bijvoorbeeld gebruikt voor twee eenvoudige kortingen of voor een eenvoudige korting en een korting van de hoeveelheid één product.

## <a name="discount-examples"></a>Voorbeelden korting
In Dynamics AX, kunt u een onbeperkt aantal detailhandelkortingen over een gemeenschappelijke set van producten. Echter, omdat er geen limiet, prestatieproblemen optreden wanneer u probeert om de kortingen die moeten worden gebruikt op de verschillende producten te berekenen. De volgende voorbeelden ziet dit probleem nader. We beginnen met twee producten en twee overlappende kortingen in voorbeeld 1. Klik in voorbeeld 2 zien we hoe het probleem ontwikkeld als er meer producten worden toegevoegd.

### <a name="example-1-two-products-and-two-discounts"></a>Voorbeeld 1: De twee producten en de twee kortingen

In dit voorbeeld twee producten nodig zijn om te komen voor elke korting en de kortingen kunnen niet worden gecombineerd. De kortingen in dit voorbeeld worden **voordeligste** kortingen. Beide producten in aanmerking voor beide kortingen. Hier vindt u de twee kortingen. [![Overlappende korting keuzelijsten met 01](./media/overlapping-discount-combo-01.jpg)](./media/overlapping-discount-combo-01.jpg) voor twee producten, hoe beter van deze twee kortingen, is afhankelijk van de prijzen van de twee producten. Wanneer de prijs van beide producten bijna gelijk of gelijk is, is het beter korting 1. Wanneer de prijs van een bepaald product aanzienlijk kleiner is dan de prijs van het andere product, is het beter korting 2. Hier wordt de wiskundige regel voor het evalueren van de twee kortingen ten opzichte van elkaar: [![Overlapping korting keuzelijsten met 02](./media/overlapping-discount-combo-02.jpg)](./media/overlapping-discount-combo-02.jpg) wanneer de prijs van product 1 gelijk aan twee derde van de prijs van product 2 is, de twee kortingen zijn gelijk. In dit voorbeeld wordt varieert het effectieve kortingspercentage voor de korting 1 van enkele procenten (wanneer de prijzen van de twee producten ver uit elkaar zijn) tot een maximum van 25 procent (wanneer de twee producten dezelfde prijs hebben). De effectieve kortingspercentage voor korting 2 is opgelost. Het is altijd 20 procent. Aangezien het effectieve kortingspercentage voor de korting 1 een bereik die hoger of lager heeft dan 2 korting kan worden, is de beste korting is afhankelijk van de prijzen van de twee producten die moeten worden toegepast. In dit voorbeeld wordt de berekening is voltooid snel, omdat alleen de twee kortingen worden toegepast op slechts twee producten. Er zijn slechts twee mogelijke combinaties: een toepassing van de korting van 1 of een toepassing van de korting 2. Er zijn geen permutaties om te berekenen. De waarde van elke korting wordt berekend met behulp van beide producten en de beste korting wordt gebruikt.

### <a name="example-2-four-products-and-two-discounts"></a>Voorbeeld 2: De vier producten en de twee kortingen

Vervolgens gebruiken we vier producten en de dezelfde twee kortingen. Alle vier producten in aanmerking voor beide kortingen. Er zijn twaalf mogelijke combinaties. Uiteindelijk twee kortingen worden toegepast voor de transactie in een van drie combinaties: twee toepassingen van korting 1, twee toepassingen van 2 of een toepassing waarin korting 2 korting 1 en een korting. Ter illustratie van de mogelijke combinaties, gaan we twee verschillende sets van vier producten waarvan de verschillende prijzen:

-   Alle vier producten hebben dezelfde prijs, $15.00. In dit geval is de beste combinatie van korting twee toepassingen van korting 1. Twee producten kunnen worden volledige prijs en twee 50 procent zal zijn uitgeschakeld. De totale korting voor de transactie is $45 (15 + 15 + 7,50 + 7,50) $15 (25 procent) uit de niet-gedisconteerde totaal van $60. Korting 2 is alleen $12 (20 procent).
-   Twee producten zijn $20 elke, één product is $15 en één product is $5. In dit geval is de beste combinatie van korting één toepassing van de korting van 2 en een toepassing van de korting 1. De volgende tabellen ziet u de kortingen.

Om te lezen in de tabellen, een product in een rij en een product in een kolom te gebruiken. Bijvoorbeeld in de tabel voor de korting 1 krijgt als u de twee $20-producten combineren u $10 uit. In de tabel voor de korting 2 wanneer u het product $15 en het product $5 combineert u $4 uit. [![Overlappende korting keuzelijsten met 03](./media/overlapping-discount-combo-03.jpg)](./media/overlapping-discount-combo-03.jpg) eerst, vinden de grootste korting die beschikbaar is in twee producten met behulp van een korting. De twee tabellen bevatten het kortingsbedrag voor alle combinaties van de twee producten. De gearceerde gedeelten van de tabellen staan voor beide gevallen waarin een product is gekoppeld aan zelf, die we niet mogelijk of een combinatie van twee producten die dezelfde produceert omkeren kortingsbedrag en kan worden genegeerd. De tabellen worden weergegeven, kunt u zien dat korting 1 voor de twee $20 artikelen is de grootste korting die voor een korting op alle vier producten beschikbaar is. (Deze korting met groen gemarkeerd in de eerste tabel.) Dat verlaat alleen de $15-product en de $5. U bekijkt de twee tabellen opnieuw, kunt u zien dat voor deze twee producten korting 1 resulteert in een korting $2.50 terwijl korting 2 een korting van $4 geeft. Daarom selecteert u korting 2. De totale korting is $14. Deze discussie om gemakkelijker te maken om zichtbaar te maken, vindt hier u twee extra tabellen die bij het weergeven van de effectieve kortingspercentage voor alle mogelijke combinaties van twee product voor beide korting 1 en 2 korting. Alleen de helft van de lijst met combinaties wordt opgenomen, omdat voor deze twee kortingen, is de volgorde waarin de twee producten worden aangeboden in de korting niet van belang. De hoogste effectieve korting (25 procent) met groen gemarkeerd en wordt de laagste effectieve korting (10 procent) rood gemarkeerd. [![Overlappende korting keuzelijsten met 04](./media/overlapping-discount-combo-04.jpg)](./media/overlapping-discount-combo-04.jpg)**opmerking:** wanneer prijzen verschillen en twee of meer korting concurreren, de enige manier om ervoor te zorgen de beste combinatie van kortingen is beide kortingen evalueren en deze te vergelijken.

## <a name="total-possible-combinations"></a>Totale mogelijke combinaties
Deze sectie blijft in het voorbeeld van de vorige sectie. We meer producten en een andere korting toevoegen en zien hoeveel combinaties moeten worden berekend en vergeleken. De volgende tabel bevat het nummer van de mogelijke kortingscombinaties naarmate de hoeveelheid product toeneemt. De tabel ziet u wat er gebeurt wanneer er zijn twee overlappende kortingen, zoals in het vorige voorbeeld, en wanneer er zijn drie overlappende kortingen. Het nummer van de mogelijke kortingscombinaties die moeten worden geëvalueerd snel groter is dan wat zelfs een snelle computer kunt berekenen en vergelijken snel genoeg moet acceptabel zijn voor detailhandeltransacties. [![Overlappende korting keuzelijsten met 05](./media/overlapping-discount-combo-05.jpg)](./media/overlapping-discount-combo-05.jpg) wanneer zelfs grotere hoeveelheden of meer overlappende kortingen worden toegepast, het totale aantal mogelijke kortingscombinaties gaat snel naar miljoen en de tijd die nodig is om te evalueren en selecteren van de best mogelijke combinatie snel zichtbaar. Sommige optimalisatie zijn doorlopen in de detailhandel prijs-engine te verminderen van het totale aantal combinaties die moeten worden geëvalueerd. Omdat het aantal overlappende kortingen en de hoeveelheden in een transactie niet beperkt, wordt altijd een groot aantal combinaties hebben worden geëvalueerd wanneer er overlappende kortingen. Dit probleem is het probleem dat specifiek is voor de marginale waarde methode rangschikken.

## <a name="marginal-value-method"></a>De methode marginale waarde
Een optimalisatie bestaat op te lossen een exponentieel toeneemt aantal combinaties die moeten worden geëvalueerd, die wordt berekend per gedeelde product van elke korting op de reeks producten die twee of meer kortingen kunnen worden toegepast op de waarde. We verwijzen naar deze waarde als de **marginale waarde** van de korting voor de gedeelde producten. De marginale waarde is het gemiddelde per product verhoging van het totale kortingsbedrag dat de gedeelde producten is opgenomen in elke korting. De marginale waarde wordt berekend door middel van het totale kortingsbedrag (DTotal), het kortingsbedrag zonder gedeelde producten af te trekken (DMinus\\ gedeeld), en dit verschil te delen door het aantal gedeelde producten (productsShared). [![Overlappende korting keuzelijsten met 06](./media/overlapping-discount-combo-06.jpg)](./media/overlapping-discount-combo-06.jpg) nadat de marginale waarde van elke korting op een gedeelde set producten wordt berekend, de kortingen worden toegepast op de gedeelde producten in de order, uitgebreid, van hoogste marginale waarde naar laagste marginale waarde. Bij deze methode worden niet alle resterende kortingsmogelijkheden vergeleken telkens nadat één exemplaar van een korting is toegepast. In plaats daarvan worden de overlappende kortingen eenmaal vergeleken en vervolgens toegepast in volgorde. Geen extra vergelijkingen uitgevoerd. U kunt de drempel voor schakelen aan de methode marginale waarde op de **korting** tabblad van de **parameters detailhandel** pagina. De toegestane tijd voor het berekenen van de totale korting is afhankelijk van het retail bedrijfstakken. Deze tijd valt echter over het algemeen in het bereik van tientallen één seconde in milliseconden.


